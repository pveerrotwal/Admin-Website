{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SanitizeLevel = exports.Messages = exports.App = void 0;\nconst index_js_1 = __importStar(require(\"./app/index.js\"));\nvar index_js_2 = require(\"./app/index.js\");\nObject.defineProperty(exports, \"App\", {\n  enumerable: true,\n  get: function () {\n    return __importDefault(index_js_2).default;\n  }\n});\nconst messages_gen_js_1 = require(\"./app/messages.gen.js\");\nconst _Messages = __importStar(require(\"./app/messages.gen.js\"));\nexports.Messages = _Messages;\nvar sanitizer_js_1 = require(\"./app/sanitizer.js\");\nObject.defineProperty(exports, \"SanitizeLevel\", {\n  enumerable: true,\n  get: function () {\n    return sanitizer_js_1.SanitizeLevel;\n  }\n});\nconst connection_js_1 = __importDefault(require(\"./modules/connection.js\"));\nconst console_js_1 = __importDefault(require(\"./modules/console.js\"));\nconst exception_js_1 = __importStar(require(\"./modules/exception.js\"));\nconst img_js_1 = __importDefault(require(\"./modules/img.js\"));\nconst input_js_1 = __importDefault(require(\"./modules/input.js\"));\nconst mouse_js_1 = __importDefault(require(\"./modules/mouse.js\"));\nconst timing_js_1 = __importDefault(require(\"./modules/timing.js\"));\nconst performance_js_1 = __importDefault(require(\"./modules/performance.js\"));\nconst scroll_js_1 = __importDefault(require(\"./modules/scroll.js\"));\nconst viewport_js_1 = __importDefault(require(\"./modules/viewport.js\"));\nconst cssrules_js_1 = __importDefault(require(\"./modules/cssrules.js\"));\nconst focus_js_1 = __importDefault(require(\"./modules/focus.js\"));\nconst fonts_js_1 = __importDefault(require(\"./modules/fonts.js\"));\nconst network_js_1 = __importDefault(require(\"./modules/network.js\"));\nconst constructedStyleSheets_js_1 = __importDefault(require(\"./modules/constructedStyleSheets.js\"));\nconst selection_js_1 = __importDefault(require(\"./modules/selection.js\"));\nconst tabs_js_1 = __importDefault(require(\"./modules/tabs.js\"));\nconst utils_js_1 = require(\"./utils.js\");\nconst DOCS_SETUP = '/installation/javascript-sdk';\nfunction processOptions(obj) {\n  if (obj == null) {\n    console.error(`OpenReplay: invalid options argument type. Please, check documentation on ${utils_js_1.DOCS_HOST}${DOCS_SETUP}`);\n    return false;\n  }\n  if (typeof obj.projectKey !== 'string') {\n    if (typeof obj.projectKey !== 'number') {\n      if (typeof obj.projectID !== 'number') {\n        // Back compatability\n        console.error(`OpenReplay: projectKey is missing or wrong type (string is expected). Please, check ${utils_js_1.DOCS_HOST}${DOCS_SETUP} for more information.`);\n        return false;\n      } else {\n        obj.projectKey = obj.projectID.toString();\n        (0, utils_js_1.deprecationWarn)('`projectID` option', '`projectKey` option', DOCS_SETUP);\n      }\n    } else {\n      console.warn('OpenReplay: projectKey is expected to have a string type.');\n      obj.projectKey = obj.projectKey.toString();\n    }\n  }\n  if (obj.sessionToken != null) {\n    (0, utils_js_1.deprecationWarn)('`sessionToken` option', '`sessionHash` start() option', '/');\n  }\n  return true;\n}\nclass API {\n  constructor(options) {\n    var _a;\n    this.options = options;\n    this.app = null;\n    this.checkDoNotTrack = () => {\n      return this.options.respectDoNotTrack && (navigator.doNotTrack == '1' ||\n      // @ts-ignore\n      window.doNotTrack == '1');\n    };\n    this.signalStartIssue = (reason, missingApi) => {\n      const doNotTrack = this.checkDoNotTrack();\n      const req = new XMLHttpRequest();\n      const orig = this.options.ingestPoint || index_js_1.DEFAULT_INGEST_POINT;\n      req.open('POST', orig + '/v1/web/not-started');\n      req.send(JSON.stringify({\n        trackerVersion: '12.0.3',\n        projectKey: this.options.projectKey,\n        doNotTrack,\n        reason,\n        missingApi\n      }));\n    };\n    this.restartCanvasTracking = () => {\n      if (this.app === null) {\n        return;\n      }\n      this.app.restartCanvasTracking();\n    };\n    this.handleError = (e, metadata = {}) => {\n      if (this.app === null) {\n        return;\n      }\n      if (e instanceof Error) {\n        const msg = (0, exception_js_1.getExceptionMessage)(e, [], metadata);\n        this.app.send(msg);\n      } else if (e instanceof ErrorEvent || 'PromiseRejectionEvent' in window && e instanceof PromiseRejectionEvent) {\n        const msg = (0, exception_js_1.getExceptionMessageFromEvent)(e, undefined, metadata);\n        if (msg != null) {\n          this.app.send(msg);\n        }\n      }\n    };\n    if (!utils_js_1.IN_BROWSER || !processOptions(options)) {\n      return;\n    }\n    if (window.__OPENREPLAY__) {\n      console.error('OpenReplay: one tracker instance has been initialised already');\n      return;\n    }\n    if (!options.__DISABLE_SECURE_MODE && location.protocol !== 'https:') {\n      console.error('OpenReplay: Your website must be publicly accessible and running on SSL in order for OpenReplay to properly capture and replay the user session. You can disable this check by setting `__DISABLE_SECURE_MODE` option to `true` if you are testing in localhost. Keep in mind, that asset files on a local machine are not available to the outside world. This might affect tracking if you use css files.');\n      return;\n    }\n    const doNotTrack = this.checkDoNotTrack();\n    const failReason = [];\n    const conditions = ['Map', 'Set', 'MutationObserver', 'performance', 'timing', 'startsWith', 'Blob', 'Worker'];\n    if (doNotTrack) {\n      failReason.push('doNotTrack');\n    } else {\n      for (const condition of conditions) {\n        if (condition === 'timing') {\n          if ('performance' in window && !(condition in performance)) {\n            failReason.push(condition);\n            break;\n          }\n        } else if (condition === 'startsWith') {\n          if (!(condition in String.prototype)) {\n            failReason.push(condition);\n            break;\n          }\n        } else {\n          if (!(condition in window)) {\n            failReason.push(condition);\n            break;\n          }\n        }\n      }\n    }\n    if (failReason.length > 0) {\n      const missingApi = failReason.join(',');\n      console.error(`OpenReplay: browser doesn't support API required for tracking or doNotTrack is set to 1. Reason: ${missingApi}`);\n      this.signalStartIssue('missing_api', failReason);\n      return;\n    }\n    const app = new index_js_1.default(options.projectKey, options.sessionToken, options, this.signalStartIssue);\n    this.app = app;\n    (0, viewport_js_1.default)(app);\n    (0, cssrules_js_1.default)(app);\n    (0, constructedStyleSheets_js_1.default)(app);\n    (0, connection_js_1.default)(app);\n    (0, console_js_1.default)(app, options);\n    (0, exception_js_1.default)(app, options);\n    (0, img_js_1.default)(app);\n    (0, input_js_1.default)(app, options);\n    (0, mouse_js_1.default)(app, options.mouse);\n    (0, timing_js_1.default)(app, options);\n    (0, performance_js_1.default)(app, options);\n    (0, scroll_js_1.default)(app);\n    (0, focus_js_1.default)(app);\n    (0, fonts_js_1.default)(app);\n    (0, network_js_1.default)(app, options.network);\n    (0, selection_js_1.default)(app);\n    (0, tabs_js_1.default)(app);\n    window.__OPENREPLAY__ = this;\n    if ((_a = options.flags) === null || _a === void 0 ? void 0 : _a.onFlagsLoad) {\n      this.onFlagsLoad(options.flags.onFlagsLoad);\n    }\n    const wOpen = window.open;\n    if (options.autoResetOnWindowOpen || options.resetTabOnWindowOpen) {\n      app.attachStartCallback(() => {\n        var _a;\n        const tabId = app.getTabId();\n        const sessStorage = (_a = app.sessionStorage) !== null && _a !== void 0 ? _a : window.sessionStorage;\n        // @ts-ignore ?\n        window.open = function (...args) {\n          if (options.autoResetOnWindowOpen) {\n            app.resetNextPageSession(true);\n          }\n          if (options.resetTabOnWindowOpen) {\n            sessStorage.removeItem(options.session_tabid_key || '__openreplay_tabid');\n          }\n          wOpen.call(window, ...args);\n          app.resetNextPageSession(false);\n          sessStorage.setItem(options.session_tabid_key || '__openreplay_tabid', tabId);\n        };\n      });\n      app.attachStopCallback(() => {\n        window.open = wOpen;\n      });\n    }\n  }\n  isFlagEnabled(flagName) {\n    return this.featureFlags.isFlagEnabled(flagName);\n  }\n  onFlagsLoad(callback) {\n    var _a;\n    (_a = this.app) === null || _a === void 0 ? void 0 : _a.featureFlags.onFlagsLoad(callback);\n  }\n  clearPersistFlags() {\n    var _a;\n    (_a = this.app) === null || _a === void 0 ? void 0 : _a.featureFlags.clearPersistFlags();\n  }\n  reloadFlags() {\n    var _a;\n    return (_a = this.app) === null || _a === void 0 ? void 0 : _a.featureFlags.reloadFlags();\n  }\n  getFeatureFlag(flagName) {\n    var _a;\n    return (_a = this.app) === null || _a === void 0 ? void 0 : _a.featureFlags.getFeatureFlag(flagName);\n  }\n  getAllFeatureFlags() {\n    var _a;\n    return (_a = this.app) === null || _a === void 0 ? void 0 : _a.featureFlags.flags;\n  }\n  use(fn) {\n    return fn(this.app, this.options);\n  }\n  isActive() {\n    if (this.app === null) {\n      return false;\n    }\n    return this.app.active();\n  }\n  /**\n   * Creates a named hook that expects event name, data string and msg direction (up/down),\n   * it will skip any message bigger than 5 mb or event name bigger than 255 symbols\n   * msg direction is \"down\" (incoming) by default\n   *\n   * @returns {(msgType: string, data: string, dir: 'up' | 'down') => void}\n   * */\n  trackWs(channelName) {\n    if (this.app === null) {\n      return;\n    }\n    return this.app.trackWs(channelName);\n  }\n  start(startOpts) {\n    if (this.browserEnvCheck()) {\n      if (this.app === null) {\n        return Promise.reject(\"Browser doesn't support required api, or doNotTrack is active.\");\n      }\n      return this.app.start(startOpts);\n    } else {\n      return Promise.reject('Trying to start not in browser.');\n    }\n  }\n  browserEnvCheck() {\n    if (!utils_js_1.IN_BROWSER) {\n      console.error(`OpenReplay: you are trying to start Tracker on a node.js environment. If you want to use OpenReplay with SSR, please, use componentDidMount or useEffect API for placing the \\`tracker.start()\\` line. Check documentation on ${utils_js_1.DOCS_HOST}${DOCS_SETUP}`);\n      return false;\n    }\n    return true;\n  }\n  /**\n   * start buffering messages without starting the actual session, which gives user 30 seconds to \"activate\" and record\n   * session by calling start() on conditional trigger and we will then send buffered batch, so it won't get lost\n   * */\n  coldStart(startOpts, conditional) {\n    if (this.browserEnvCheck()) {\n      if (this.app === null) {\n        return Promise.reject('Tracker not initialized');\n      }\n      void this.app.coldStart(startOpts, conditional);\n    } else {\n      return Promise.reject('Trying to start not in browser.');\n    }\n  }\n  /**\n   * Starts offline session recording. Keep in mind that only user device time will be used for timestamps.\n   * (no backend delay sync)\n   *\n   * @param {Object} startOpts - options for session start, same as .start()\n   * @param {Function} onSessionSent - callback that will be called once session is fully sent\n   * @returns methods to manipulate buffer:\n   *\n   * saveBuffer - to save it in localStorage\n   *\n   * getBuffer - returns current buffer\n   *\n   * setBuffer - replaces current buffer with given\n   * */\n  startOfflineRecording(startOpts, onSessionSent) {\n    if (this.browserEnvCheck()) {\n      if (this.app === null) {\n        return Promise.reject('Tracker not initialized');\n      }\n      return this.app.offlineRecording(startOpts, onSessionSent);\n    } else {\n      return Promise.reject('Trying to start not in browser.');\n    }\n  }\n  /**\n   * Uploads the stored session buffer to backend\n   * @returns promise that resolves once messages are loaded, it has to be awaited\n   * so the session can be uploaded properly\n   * @resolve - if messages were loaded into service worker successfully\n   * @reject {string} - error message\n   * */\n  uploadOfflineRecording() {\n    if (this.app === null) {\n      return;\n    }\n    return this.app.uploadOfflineRecording();\n  }\n  stop() {\n    if (this.app === null) {\n      return;\n    }\n    this.app.stop();\n    return this.app.session.getSessionHash();\n  }\n  forceFlushBatch() {\n    if (this.app === null) {\n      return;\n    }\n    this.app.forceFlushBatch();\n  }\n  getSessionToken() {\n    if (this.app === null) {\n      return null;\n    }\n    return this.app.getSessionToken();\n  }\n  getSessionID() {\n    if (this.app === null) {\n      return null;\n    }\n    return this.app.getSessionID();\n  }\n  getTabId() {\n    if (this.app === null) {\n      return null;\n    }\n    return this.app.getTabId();\n  }\n  getUxId() {\n    if (this.app === null) {\n      return null;\n    }\n    return this.app.getUxtId();\n  }\n  sessionID() {\n    (0, utils_js_1.deprecationWarn)(\"'sessionID' method\", \"'getSessionID' method\", '/');\n    return this.getSessionID();\n  }\n  getSessionURL(options) {\n    if (this.app === null) {\n      return undefined;\n    }\n    return this.app.getSessionURL(options);\n  }\n  setUserID(id) {\n    if (typeof id === 'string' && this.app !== null) {\n      this.app.session.setUserID(id);\n    }\n  }\n  userID(id) {\n    (0, utils_js_1.deprecationWarn)(\"'userID' method\", \"'setUserID' method\", '/');\n    this.setUserID(id);\n  }\n  setUserAnonymousID(id) {\n    if (typeof id === 'string' && this.app !== null) {\n      this.app.send((0, messages_gen_js_1.UserAnonymousID)(id));\n    }\n  }\n  userAnonymousID(id) {\n    (0, utils_js_1.deprecationWarn)(\"'userAnonymousID' method\", \"'setUserAnonymousID' method\", '/');\n    this.setUserAnonymousID(id);\n  }\n  setMetadata(key, value) {\n    if (typeof key === 'string' && typeof value === 'string' && this.app !== null) {\n      this.app.session.setMetadata(key, value);\n    }\n  }\n  metadata(key, value) {\n    (0, utils_js_1.deprecationWarn)(\"'metadata' method\", \"'setMetadata' method\", '/');\n    this.setMetadata(key, value);\n  }\n  event(key, payload = null, issue = false) {\n    if (typeof key === 'string' && this.app !== null) {\n      if (issue) {\n        return this.issue(key, payload);\n      } else {\n        try {\n          payload = JSON.stringify(payload);\n        } catch (e) {\n          return;\n        }\n        this.app.send((0, messages_gen_js_1.CustomEvent)(key, payload));\n      }\n    }\n  }\n  issue(key, payload = null) {\n    if (typeof key === 'string' && this.app !== null) {\n      try {\n        payload = JSON.stringify(payload);\n      } catch (e) {\n        return;\n      }\n      this.app.send((0, messages_gen_js_1.CustomIssue)(key, payload));\n    }\n  }\n}\nexports.default = API;","map":{"version":3,"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","__importDefault","exports","SanitizeLevel","Messages","App","index_js_1","require","index_js_2","default","messages_gen_js_1","_Messages","sanitizer_js_1","connection_js_1","console_js_1","exception_js_1","img_js_1","input_js_1","mouse_js_1","timing_js_1","performance_js_1","scroll_js_1","viewport_js_1","cssrules_js_1","focus_js_1","fonts_js_1","network_js_1","constructedStyleSheets_js_1","selection_js_1","tabs_js_1","utils_js_1","DOCS_SETUP","processOptions","obj","console","error","DOCS_HOST","projectKey","projectID","toString","deprecationWarn","warn","sessionToken","API","constructor","options","_a","app","checkDoNotTrack","respectDoNotTrack","navigator","doNotTrack","window","signalStartIssue","reason","missingApi","req","XMLHttpRequest","orig","ingestPoint","DEFAULT_INGEST_POINT","open","send","JSON","stringify","trackerVersion","restartCanvasTracking","handleError","e","metadata","Error","msg","getExceptionMessage","ErrorEvent","PromiseRejectionEvent","getExceptionMessageFromEvent","IN_BROWSER","__OPENREPLAY__","__DISABLE_SECURE_MODE","location","protocol","failReason","conditions","push","condition","performance","String","length","join","mouse","network","flags","onFlagsLoad","wOpen","autoResetOnWindowOpen","resetTabOnWindowOpen","attachStartCallback","tabId","getTabId","sessStorage","sessionStorage","args","resetNextPageSession","removeItem","session_tabid_key","setItem","attachStopCallback","isFlagEnabled","flagName","featureFlags","callback","clearPersistFlags","reloadFlags","getFeatureFlag","getAllFeatureFlags","use","fn","isActive","active","trackWs","channelName","start","startOpts","browserEnvCheck","Promise","reject","coldStart","conditional","startOfflineRecording","onSessionSent","offlineRecording","uploadOfflineRecording","stop","session","getSessionHash","forceFlushBatch","getSessionToken","getSessionID","getUxId","getUxtId","sessionID","getSessionURL","setUserID","id","userID","setUserAnonymousID","UserAnonymousID","userAnonymousID","setMetadata","key","event","payload","issue","CustomEvent","CustomIssue"],"sources":["/Users/paramvirrotwal/Observability/website-admin-react-web-app-project/node_modules/@openreplay/tracker/cjs/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SanitizeLevel = exports.Messages = exports.App = void 0;\nconst index_js_1 = __importStar(require(\"./app/index.js\"));\nvar index_js_2 = require(\"./app/index.js\");\nObject.defineProperty(exports, \"App\", { enumerable: true, get: function () { return __importDefault(index_js_2).default; } });\nconst messages_gen_js_1 = require(\"./app/messages.gen.js\");\nconst _Messages = __importStar(require(\"./app/messages.gen.js\"));\nexports.Messages = _Messages;\nvar sanitizer_js_1 = require(\"./app/sanitizer.js\");\nObject.defineProperty(exports, \"SanitizeLevel\", { enumerable: true, get: function () { return sanitizer_js_1.SanitizeLevel; } });\nconst connection_js_1 = __importDefault(require(\"./modules/connection.js\"));\nconst console_js_1 = __importDefault(require(\"./modules/console.js\"));\nconst exception_js_1 = __importStar(require(\"./modules/exception.js\"));\nconst img_js_1 = __importDefault(require(\"./modules/img.js\"));\nconst input_js_1 = __importDefault(require(\"./modules/input.js\"));\nconst mouse_js_1 = __importDefault(require(\"./modules/mouse.js\"));\nconst timing_js_1 = __importDefault(require(\"./modules/timing.js\"));\nconst performance_js_1 = __importDefault(require(\"./modules/performance.js\"));\nconst scroll_js_1 = __importDefault(require(\"./modules/scroll.js\"));\nconst viewport_js_1 = __importDefault(require(\"./modules/viewport.js\"));\nconst cssrules_js_1 = __importDefault(require(\"./modules/cssrules.js\"));\nconst focus_js_1 = __importDefault(require(\"./modules/focus.js\"));\nconst fonts_js_1 = __importDefault(require(\"./modules/fonts.js\"));\nconst network_js_1 = __importDefault(require(\"./modules/network.js\"));\nconst constructedStyleSheets_js_1 = __importDefault(require(\"./modules/constructedStyleSheets.js\"));\nconst selection_js_1 = __importDefault(require(\"./modules/selection.js\"));\nconst tabs_js_1 = __importDefault(require(\"./modules/tabs.js\"));\nconst utils_js_1 = require(\"./utils.js\");\nconst DOCS_SETUP = '/installation/javascript-sdk';\nfunction processOptions(obj) {\n    if (obj == null) {\n        console.error(`OpenReplay: invalid options argument type. Please, check documentation on ${utils_js_1.DOCS_HOST}${DOCS_SETUP}`);\n        return false;\n    }\n    if (typeof obj.projectKey !== 'string') {\n        if (typeof obj.projectKey !== 'number') {\n            if (typeof obj.projectID !== 'number') {\n                // Back compatability\n                console.error(`OpenReplay: projectKey is missing or wrong type (string is expected). Please, check ${utils_js_1.DOCS_HOST}${DOCS_SETUP} for more information.`);\n                return false;\n            }\n            else {\n                obj.projectKey = obj.projectID.toString();\n                (0, utils_js_1.deprecationWarn)('`projectID` option', '`projectKey` option', DOCS_SETUP);\n            }\n        }\n        else {\n            console.warn('OpenReplay: projectKey is expected to have a string type.');\n            obj.projectKey = obj.projectKey.toString();\n        }\n    }\n    if (obj.sessionToken != null) {\n        (0, utils_js_1.deprecationWarn)('`sessionToken` option', '`sessionHash` start() option', '/');\n    }\n    return true;\n}\nclass API {\n    constructor(options) {\n        var _a;\n        this.options = options;\n        this.app = null;\n        this.checkDoNotTrack = () => {\n            return (this.options.respectDoNotTrack &&\n                (navigator.doNotTrack == '1' ||\n                    // @ts-ignore\n                    window.doNotTrack == '1'));\n        };\n        this.signalStartIssue = (reason, missingApi) => {\n            const doNotTrack = this.checkDoNotTrack();\n            const req = new XMLHttpRequest();\n            const orig = this.options.ingestPoint || index_js_1.DEFAULT_INGEST_POINT;\n            req.open('POST', orig + '/v1/web/not-started');\n            req.send(JSON.stringify({\n                trackerVersion: '12.0.3',\n                projectKey: this.options.projectKey,\n                doNotTrack,\n                reason,\n                missingApi,\n            }));\n        };\n        this.restartCanvasTracking = () => {\n            if (this.app === null) {\n                return;\n            }\n            this.app.restartCanvasTracking();\n        };\n        this.handleError = (e, metadata = {}) => {\n            if (this.app === null) {\n                return;\n            }\n            if (e instanceof Error) {\n                const msg = (0, exception_js_1.getExceptionMessage)(e, [], metadata);\n                this.app.send(msg);\n            }\n            else if (e instanceof ErrorEvent ||\n                ('PromiseRejectionEvent' in window && e instanceof PromiseRejectionEvent)) {\n                const msg = (0, exception_js_1.getExceptionMessageFromEvent)(e, undefined, metadata);\n                if (msg != null) {\n                    this.app.send(msg);\n                }\n            }\n        };\n        if (!utils_js_1.IN_BROWSER || !processOptions(options)) {\n            return;\n        }\n        if (window.__OPENREPLAY__) {\n            console.error('OpenReplay: one tracker instance has been initialised already');\n            return;\n        }\n        if (!options.__DISABLE_SECURE_MODE && location.protocol !== 'https:') {\n            console.error('OpenReplay: Your website must be publicly accessible and running on SSL in order for OpenReplay to properly capture and replay the user session. You can disable this check by setting `__DISABLE_SECURE_MODE` option to `true` if you are testing in localhost. Keep in mind, that asset files on a local machine are not available to the outside world. This might affect tracking if you use css files.');\n            return;\n        }\n        const doNotTrack = this.checkDoNotTrack();\n        const failReason = [];\n        const conditions = [\n            'Map',\n            'Set',\n            'MutationObserver',\n            'performance',\n            'timing',\n            'startsWith',\n            'Blob',\n            'Worker',\n        ];\n        if (doNotTrack) {\n            failReason.push('doNotTrack');\n        }\n        else {\n            for (const condition of conditions) {\n                if (condition === 'timing') {\n                    if ('performance' in window && !(condition in performance)) {\n                        failReason.push(condition);\n                        break;\n                    }\n                }\n                else if (condition === 'startsWith') {\n                    if (!(condition in String.prototype)) {\n                        failReason.push(condition);\n                        break;\n                    }\n                }\n                else {\n                    if (!(condition in window)) {\n                        failReason.push(condition);\n                        break;\n                    }\n                }\n            }\n        }\n        if (failReason.length > 0) {\n            const missingApi = failReason.join(',');\n            console.error(`OpenReplay: browser doesn't support API required for tracking or doNotTrack is set to 1. Reason: ${missingApi}`);\n            this.signalStartIssue('missing_api', failReason);\n            return;\n        }\n        const app = new index_js_1.default(options.projectKey, options.sessionToken, options, this.signalStartIssue);\n        this.app = app;\n        (0, viewport_js_1.default)(app);\n        (0, cssrules_js_1.default)(app);\n        (0, constructedStyleSheets_js_1.default)(app);\n        (0, connection_js_1.default)(app);\n        (0, console_js_1.default)(app, options);\n        (0, exception_js_1.default)(app, options);\n        (0, img_js_1.default)(app);\n        (0, input_js_1.default)(app, options);\n        (0, mouse_js_1.default)(app, options.mouse);\n        (0, timing_js_1.default)(app, options);\n        (0, performance_js_1.default)(app, options);\n        (0, scroll_js_1.default)(app);\n        (0, focus_js_1.default)(app);\n        (0, fonts_js_1.default)(app);\n        (0, network_js_1.default)(app, options.network);\n        (0, selection_js_1.default)(app);\n        (0, tabs_js_1.default)(app);\n        window.__OPENREPLAY__ = this;\n        if ((_a = options.flags) === null || _a === void 0 ? void 0 : _a.onFlagsLoad) {\n            this.onFlagsLoad(options.flags.onFlagsLoad);\n        }\n        const wOpen = window.open;\n        if (options.autoResetOnWindowOpen || options.resetTabOnWindowOpen) {\n            app.attachStartCallback(() => {\n                var _a;\n                const tabId = app.getTabId();\n                const sessStorage = (_a = app.sessionStorage) !== null && _a !== void 0 ? _a : window.sessionStorage;\n                // @ts-ignore ?\n                window.open = function (...args) {\n                    if (options.autoResetOnWindowOpen) {\n                        app.resetNextPageSession(true);\n                    }\n                    if (options.resetTabOnWindowOpen) {\n                        sessStorage.removeItem(options.session_tabid_key || '__openreplay_tabid');\n                    }\n                    wOpen.call(window, ...args);\n                    app.resetNextPageSession(false);\n                    sessStorage.setItem(options.session_tabid_key || '__openreplay_tabid', tabId);\n                };\n            });\n            app.attachStopCallback(() => {\n                window.open = wOpen;\n            });\n        }\n    }\n    isFlagEnabled(flagName) {\n        return this.featureFlags.isFlagEnabled(flagName);\n    }\n    onFlagsLoad(callback) {\n        var _a;\n        (_a = this.app) === null || _a === void 0 ? void 0 : _a.featureFlags.onFlagsLoad(callback);\n    }\n    clearPersistFlags() {\n        var _a;\n        (_a = this.app) === null || _a === void 0 ? void 0 : _a.featureFlags.clearPersistFlags();\n    }\n    reloadFlags() {\n        var _a;\n        return (_a = this.app) === null || _a === void 0 ? void 0 : _a.featureFlags.reloadFlags();\n    }\n    getFeatureFlag(flagName) {\n        var _a;\n        return (_a = this.app) === null || _a === void 0 ? void 0 : _a.featureFlags.getFeatureFlag(flagName);\n    }\n    getAllFeatureFlags() {\n        var _a;\n        return (_a = this.app) === null || _a === void 0 ? void 0 : _a.featureFlags.flags;\n    }\n    use(fn) {\n        return fn(this.app, this.options);\n    }\n    isActive() {\n        if (this.app === null) {\n            return false;\n        }\n        return this.app.active();\n    }\n    /**\n     * Creates a named hook that expects event name, data string and msg direction (up/down),\n     * it will skip any message bigger than 5 mb or event name bigger than 255 symbols\n     * msg direction is \"down\" (incoming) by default\n     *\n     * @returns {(msgType: string, data: string, dir: 'up' | 'down') => void}\n     * */\n    trackWs(channelName) {\n        if (this.app === null) {\n            return;\n        }\n        return this.app.trackWs(channelName);\n    }\n    start(startOpts) {\n        if (this.browserEnvCheck()) {\n            if (this.app === null) {\n                return Promise.reject(\"Browser doesn't support required api, or doNotTrack is active.\");\n            }\n            return this.app.start(startOpts);\n        }\n        else {\n            return Promise.reject('Trying to start not in browser.');\n        }\n    }\n    browserEnvCheck() {\n        if (!utils_js_1.IN_BROWSER) {\n            console.error(`OpenReplay: you are trying to start Tracker on a node.js environment. If you want to use OpenReplay with SSR, please, use componentDidMount or useEffect API for placing the \\`tracker.start()\\` line. Check documentation on ${utils_js_1.DOCS_HOST}${DOCS_SETUP}`);\n            return false;\n        }\n        return true;\n    }\n    /**\n     * start buffering messages without starting the actual session, which gives user 30 seconds to \"activate\" and record\n     * session by calling start() on conditional trigger and we will then send buffered batch, so it won't get lost\n     * */\n    coldStart(startOpts, conditional) {\n        if (this.browserEnvCheck()) {\n            if (this.app === null) {\n                return Promise.reject('Tracker not initialized');\n            }\n            void this.app.coldStart(startOpts, conditional);\n        }\n        else {\n            return Promise.reject('Trying to start not in browser.');\n        }\n    }\n    /**\n     * Starts offline session recording. Keep in mind that only user device time will be used for timestamps.\n     * (no backend delay sync)\n     *\n     * @param {Object} startOpts - options for session start, same as .start()\n     * @param {Function} onSessionSent - callback that will be called once session is fully sent\n     * @returns methods to manipulate buffer:\n     *\n     * saveBuffer - to save it in localStorage\n     *\n     * getBuffer - returns current buffer\n     *\n     * setBuffer - replaces current buffer with given\n     * */\n    startOfflineRecording(startOpts, onSessionSent) {\n        if (this.browserEnvCheck()) {\n            if (this.app === null) {\n                return Promise.reject('Tracker not initialized');\n            }\n            return this.app.offlineRecording(startOpts, onSessionSent);\n        }\n        else {\n            return Promise.reject('Trying to start not in browser.');\n        }\n    }\n    /**\n     * Uploads the stored session buffer to backend\n     * @returns promise that resolves once messages are loaded, it has to be awaited\n     * so the session can be uploaded properly\n     * @resolve - if messages were loaded into service worker successfully\n     * @reject {string} - error message\n     * */\n    uploadOfflineRecording() {\n        if (this.app === null) {\n            return;\n        }\n        return this.app.uploadOfflineRecording();\n    }\n    stop() {\n        if (this.app === null) {\n            return;\n        }\n        this.app.stop();\n        return this.app.session.getSessionHash();\n    }\n    forceFlushBatch() {\n        if (this.app === null) {\n            return;\n        }\n        this.app.forceFlushBatch();\n    }\n    getSessionToken() {\n        if (this.app === null) {\n            return null;\n        }\n        return this.app.getSessionToken();\n    }\n    getSessionID() {\n        if (this.app === null) {\n            return null;\n        }\n        return this.app.getSessionID();\n    }\n    getTabId() {\n        if (this.app === null) {\n            return null;\n        }\n        return this.app.getTabId();\n    }\n    getUxId() {\n        if (this.app === null) {\n            return null;\n        }\n        return this.app.getUxtId();\n    }\n    sessionID() {\n        (0, utils_js_1.deprecationWarn)(\"'sessionID' method\", \"'getSessionID' method\", '/');\n        return this.getSessionID();\n    }\n    getSessionURL(options) {\n        if (this.app === null) {\n            return undefined;\n        }\n        return this.app.getSessionURL(options);\n    }\n    setUserID(id) {\n        if (typeof id === 'string' && this.app !== null) {\n            this.app.session.setUserID(id);\n        }\n    }\n    userID(id) {\n        (0, utils_js_1.deprecationWarn)(\"'userID' method\", \"'setUserID' method\", '/');\n        this.setUserID(id);\n    }\n    setUserAnonymousID(id) {\n        if (typeof id === 'string' && this.app !== null) {\n            this.app.send((0, messages_gen_js_1.UserAnonymousID)(id));\n        }\n    }\n    userAnonymousID(id) {\n        (0, utils_js_1.deprecationWarn)(\"'userAnonymousID' method\", \"'setUserAnonymousID' method\", '/');\n        this.setUserAnonymousID(id);\n    }\n    setMetadata(key, value) {\n        if (typeof key === 'string' && typeof value === 'string' && this.app !== null) {\n            this.app.session.setMetadata(key, value);\n        }\n    }\n    metadata(key, value) {\n        (0, utils_js_1.deprecationWarn)(\"'metadata' method\", \"'setMetadata' method\", '/');\n        this.setMetadata(key, value);\n    }\n    event(key, payload = null, issue = false) {\n        if (typeof key === 'string' && this.app !== null) {\n            if (issue) {\n                return this.issue(key, payload);\n            }\n            else {\n                try {\n                    payload = JSON.stringify(payload);\n                }\n                catch (e) {\n                    return;\n                }\n                this.app.send((0, messages_gen_js_1.CustomEvent)(key, payload));\n            }\n        }\n    }\n    issue(key, payload = null) {\n        if (typeof key === 'string' && this.app !== null) {\n            try {\n                payload = JSON.stringify(payload);\n            }\n            catch (e) {\n                return;\n            }\n            this.app.send((0, messages_gen_js_1.CustomIssue)(key, payload));\n        }\n    }\n}\nexports.default = API;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}