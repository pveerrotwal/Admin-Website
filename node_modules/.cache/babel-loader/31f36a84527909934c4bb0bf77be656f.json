{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst guards_js_1 = require(\"../app/guards.js\");\nconst messages_gen_js_1 = require(\"../app/messages.gen.js\");\nfunction default_1(app) {\n  function sendSetNodeFocus(n) {\n    const id = app.nodes.getID(n);\n    if (id !== undefined) {\n      app.send((0, messages_gen_js_1.SetNodeFocus)(id));\n    }\n  }\n  let blurred = false;\n  app.nodes.attachNodeCallback(node => {\n    if (!(0, guards_js_1.hasTag)(node, 'body')) {\n      return;\n    }\n    app.nodes.attachNodeListener(node, 'focus', e => {\n      if (!(0, guards_js_1.isNode)(e.target)) {\n        return;\n      }\n      sendSetNodeFocus(e.target);\n      blurred = false;\n    });\n    app.nodes.attachNodeListener(node, 'blur', e => {\n      if (e.relatedTarget === null) {\n        blurred = true;\n        setTimeout(() => {\n          if (blurred) {\n            app.send((0, messages_gen_js_1.SetNodeFocus)(-1));\n          }\n        }, 0);\n      }\n    });\n  });\n  app.attachStartCallback(() => {\n    let elem = document.activeElement;\n    while (elem && (0, guards_js_1.hasTag)(elem, 'iframe') && elem.contentDocument) {\n      elem = elem.contentDocument.activeElement;\n    }\n    if (elem && elem !== elem.ownerDocument.body) {\n      sendSetNodeFocus(elem);\n    }\n  }, true);\n}\nexports.default = default_1;","map":{"version":3,"names":["Object","defineProperty","exports","value","guards_js_1","require","messages_gen_js_1","default_1","app","sendSetNodeFocus","n","id","nodes","getID","undefined","send","SetNodeFocus","blurred","attachNodeCallback","node","hasTag","attachNodeListener","e","isNode","target","relatedTarget","setTimeout","attachStartCallback","elem","document","activeElement","contentDocument","ownerDocument","body","default"],"sources":["/Users/paramvirrotwal/Observability/website-admin-react-web-app-project/node_modules/@openreplay/tracker/cjs/modules/focus.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst guards_js_1 = require(\"../app/guards.js\");\nconst messages_gen_js_1 = require(\"../app/messages.gen.js\");\nfunction default_1(app) {\n    function sendSetNodeFocus(n) {\n        const id = app.nodes.getID(n);\n        if (id !== undefined) {\n            app.send((0, messages_gen_js_1.SetNodeFocus)(id));\n        }\n    }\n    let blurred = false;\n    app.nodes.attachNodeCallback((node) => {\n        if (!(0, guards_js_1.hasTag)(node, 'body')) {\n            return;\n        }\n        app.nodes.attachNodeListener(node, 'focus', (e) => {\n            if (!(0, guards_js_1.isNode)(e.target)) {\n                return;\n            }\n            sendSetNodeFocus(e.target);\n            blurred = false;\n        });\n        app.nodes.attachNodeListener(node, 'blur', (e) => {\n            if (e.relatedTarget === null) {\n                blurred = true;\n                setTimeout(() => {\n                    if (blurred) {\n                        app.send((0, messages_gen_js_1.SetNodeFocus)(-1));\n                    }\n                }, 0);\n            }\n        });\n    });\n    app.attachStartCallback(() => {\n        let elem = document.activeElement;\n        while (elem && (0, guards_js_1.hasTag)(elem, 'iframe') && elem.contentDocument) {\n            elem = elem.contentDocument.activeElement;\n        }\n        if (elem && elem !== elem.ownerDocument.body) {\n            sendSetNodeFocus(elem);\n        }\n    }, true);\n}\nexports.default = default_1;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7D,MAAMC,WAAW,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AAC/C,MAAMC,iBAAiB,GAAGD,OAAO,CAAC,wBAAwB,CAAC;AAC3D,SAASE,SAASA,CAACC,GAAG,EAAE;EACpB,SAASC,gBAAgBA,CAACC,CAAC,EAAE;IACzB,MAAMC,EAAE,GAAGH,GAAG,CAACI,KAAK,CAACC,KAAK,CAACH,CAAC,CAAC;IAC7B,IAAIC,EAAE,KAAKG,SAAS,EAAE;MAClBN,GAAG,CAACO,IAAI,CAAC,CAAC,CAAC,EAAET,iBAAiB,CAACU,YAAY,EAAEL,EAAE,CAAC,CAAC;IACrD;EACJ;EACA,IAAIM,OAAO,GAAG,KAAK;EACnBT,GAAG,CAACI,KAAK,CAACM,kBAAkB,CAAEC,IAAI,IAAK;IACnC,IAAI,CAAC,CAAC,CAAC,EAAEf,WAAW,CAACgB,MAAM,EAAED,IAAI,EAAE,MAAM,CAAC,EAAE;MACxC;IACJ;IACAX,GAAG,CAACI,KAAK,CAACS,kBAAkB,CAACF,IAAI,EAAE,OAAO,EAAGG,CAAC,IAAK;MAC/C,IAAI,CAAC,CAAC,CAAC,EAAElB,WAAW,CAACmB,MAAM,EAAED,CAAC,CAACE,MAAM,CAAC,EAAE;QACpC;MACJ;MACAf,gBAAgB,CAACa,CAAC,CAACE,MAAM,CAAC;MAC1BP,OAAO,GAAG,KAAK;IACnB,CAAC,CAAC;IACFT,GAAG,CAACI,KAAK,CAACS,kBAAkB,CAACF,IAAI,EAAE,MAAM,EAAGG,CAAC,IAAK;MAC9C,IAAIA,CAAC,CAACG,aAAa,KAAK,IAAI,EAAE;QAC1BR,OAAO,GAAG,IAAI;QACdS,UAAU,CAAC,MAAM;UACb,IAAIT,OAAO,EAAE;YACTT,GAAG,CAACO,IAAI,CAAC,CAAC,CAAC,EAAET,iBAAiB,CAACU,YAAY,EAAE,CAAC,CAAC,CAAC,CAAC;UACrD;QACJ,CAAC,EAAE,CAAC,CAAC;MACT;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;EACFR,GAAG,CAACmB,mBAAmB,CAAC,MAAM;IAC1B,IAAIC,IAAI,GAAGC,QAAQ,CAACC,aAAa;IACjC,OAAOF,IAAI,IAAI,CAAC,CAAC,EAAExB,WAAW,CAACgB,MAAM,EAAEQ,IAAI,EAAE,QAAQ,CAAC,IAAIA,IAAI,CAACG,eAAe,EAAE;MAC5EH,IAAI,GAAGA,IAAI,CAACG,eAAe,CAACD,aAAa;IAC7C;IACA,IAAIF,IAAI,IAAIA,IAAI,KAAKA,IAAI,CAACI,aAAa,CAACC,IAAI,EAAE;MAC1CxB,gBAAgB,CAACmB,IAAI,CAAC;IAC1B;EACJ,CAAC,EAAE,IAAI,CAAC;AACZ;AACA1B,OAAO,CAACgC,OAAO,GAAG3B,SAAS"},"metadata":{},"sourceType":"script"}