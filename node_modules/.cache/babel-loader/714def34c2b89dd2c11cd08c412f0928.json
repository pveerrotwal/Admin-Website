{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.jsHeapSizeLimit = exports.deviceMemory = void 0;\nconst utils_js_1 = require(\"../utils.js\");\nconst messages_gen_js_1 = require(\"../app/messages.gen.js\");\nconst perf = utils_js_1.IN_BROWSER && 'performance' in window && 'memory' in performance // works in Chrome only\n? performance : {\n  memory: {}\n};\nexports.deviceMemory = utils_js_1.IN_BROWSER ? (navigator.deviceMemory || 0) * 1024 : 0;\nexports.jsHeapSizeLimit = perf.memory.jsHeapSizeLimit || 0;\nfunction default_1(app, opts) {\n  const options = Object.assign({\n    capturePerformance: true\n  }, opts);\n  if (!options.capturePerformance) {\n    return;\n  }\n  let frames;\n  let ticks;\n  const nextFrame = () => {\n    if (frames === undefined || frames === -1) {\n      return;\n    }\n    frames++;\n    requestAnimationFrame(nextFrame);\n  };\n  app.ticker.attach(() => {\n    if (ticks === undefined || ticks === -1) {\n      return;\n    }\n    ticks++;\n  }, 0, false);\n  const sendPerformanceTrack = () => {\n    if (frames === undefined || ticks === undefined) {\n      return;\n    }\n    app.send((0, messages_gen_js_1.PerformanceTrack)(frames, ticks, perf.memory.totalJSHeapSize || 0, perf.memory.usedJSHeapSize || 0));\n    ticks = frames = document.hidden ? -1 : 0;\n  };\n  app.attachStartCallback(() => {\n    ticks = frames = -1;\n    sendPerformanceTrack();\n    nextFrame();\n  });\n  app.attachStopCallback(() => {\n    ticks = frames = undefined;\n  });\n  app.ticker.attach(sendPerformanceTrack, 40, false);\n  if (document.hidden !== undefined) {\n    app.attachEventListener(document, 'visibilitychange', sendPerformanceTrack, false, false);\n  }\n}\nexports.default = default_1;","map":{"version":3,"names":["Object","defineProperty","exports","value","jsHeapSizeLimit","deviceMemory","utils_js_1","require","messages_gen_js_1","perf","IN_BROWSER","window","performance","memory","navigator","default_1","app","opts","options","assign","capturePerformance","frames","ticks","nextFrame","undefined","requestAnimationFrame","ticker","attach","sendPerformanceTrack","send","PerformanceTrack","totalJSHeapSize","usedJSHeapSize","document","hidden","attachStartCallback","attachStopCallback","attachEventListener","default"],"sources":["/Users/paramvirrotwal/Observability/website-admin-react-web-app-project/node_modules/@openreplay/tracker/cjs/modules/performance.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.jsHeapSizeLimit = exports.deviceMemory = void 0;\nconst utils_js_1 = require(\"../utils.js\");\nconst messages_gen_js_1 = require(\"../app/messages.gen.js\");\nconst perf = utils_js_1.IN_BROWSER && 'performance' in window && 'memory' in performance // works in Chrome only\n    ? performance\n    : { memory: {} };\nexports.deviceMemory = utils_js_1.IN_BROWSER ? (navigator.deviceMemory || 0) * 1024 : 0;\nexports.jsHeapSizeLimit = perf.memory.jsHeapSizeLimit || 0;\nfunction default_1(app, opts) {\n    const options = Object.assign({\n        capturePerformance: true,\n    }, opts);\n    if (!options.capturePerformance) {\n        return;\n    }\n    let frames;\n    let ticks;\n    const nextFrame = () => {\n        if (frames === undefined || frames === -1) {\n            return;\n        }\n        frames++;\n        requestAnimationFrame(nextFrame);\n    };\n    app.ticker.attach(() => {\n        if (ticks === undefined || ticks === -1) {\n            return;\n        }\n        ticks++;\n    }, 0, false);\n    const sendPerformanceTrack = () => {\n        if (frames === undefined || ticks === undefined) {\n            return;\n        }\n        app.send((0, messages_gen_js_1.PerformanceTrack)(frames, ticks, perf.memory.totalJSHeapSize || 0, perf.memory.usedJSHeapSize || 0));\n        ticks = frames = document.hidden ? -1 : 0;\n    };\n    app.attachStartCallback(() => {\n        ticks = frames = -1;\n        sendPerformanceTrack();\n        nextFrame();\n    });\n    app.attachStopCallback(() => {\n        ticks = frames = undefined;\n    });\n    app.ticker.attach(sendPerformanceTrack, 40, false);\n    if (document.hidden !== undefined) {\n        app.attachEventListener(document, 'visibilitychange', sendPerformanceTrack, false, false);\n    }\n}\nexports.default = default_1;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,eAAe,GAAGF,OAAO,CAACG,YAAY,GAAG,KAAK,CAAC;AACvD,MAAMC,UAAU,GAAGC,OAAO,CAAC,aAAa,CAAC;AACzC,MAAMC,iBAAiB,GAAGD,OAAO,CAAC,wBAAwB,CAAC;AAC3D,MAAME,IAAI,GAAGH,UAAU,CAACI,UAAU,IAAI,aAAa,IAAIC,MAAM,IAAI,QAAQ,IAAIC,WAAW,CAAC;AAAA,EACnFA,WAAW,GACX;EAAEC,MAAM,EAAE,CAAC;AAAE,CAAC;AACpBX,OAAO,CAACG,YAAY,GAAGC,UAAU,CAACI,UAAU,GAAG,CAACI,SAAS,CAACT,YAAY,IAAI,CAAC,IAAI,IAAI,GAAG,CAAC;AACvFH,OAAO,CAACE,eAAe,GAAGK,IAAI,CAACI,MAAM,CAACT,eAAe,IAAI,CAAC;AAC1D,SAASW,SAASA,CAACC,GAAG,EAAEC,IAAI,EAAE;EAC1B,MAAMC,OAAO,GAAGlB,MAAM,CAACmB,MAAM,CAAC;IAC1BC,kBAAkB,EAAE;EACxB,CAAC,EAAEH,IAAI,CAAC;EACR,IAAI,CAACC,OAAO,CAACE,kBAAkB,EAAE;IAC7B;EACJ;EACA,IAAIC,MAAM;EACV,IAAIC,KAAK;EACT,MAAMC,SAAS,GAAGA,CAAA,KAAM;IACpB,IAAIF,MAAM,KAAKG,SAAS,IAAIH,MAAM,KAAK,CAAC,CAAC,EAAE;MACvC;IACJ;IACAA,MAAM,EAAE;IACRI,qBAAqB,CAACF,SAAS,CAAC;EACpC,CAAC;EACDP,GAAG,CAACU,MAAM,CAACC,MAAM,CAAC,MAAM;IACpB,IAAIL,KAAK,KAAKE,SAAS,IAAIF,KAAK,KAAK,CAAC,CAAC,EAAE;MACrC;IACJ;IACAA,KAAK,EAAE;EACX,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC;EACZ,MAAMM,oBAAoB,GAAGA,CAAA,KAAM;IAC/B,IAAIP,MAAM,KAAKG,SAAS,IAAIF,KAAK,KAAKE,SAAS,EAAE;MAC7C;IACJ;IACAR,GAAG,CAACa,IAAI,CAAC,CAAC,CAAC,EAAErB,iBAAiB,CAACsB,gBAAgB,EAAET,MAAM,EAAEC,KAAK,EAAEb,IAAI,CAACI,MAAM,CAACkB,eAAe,IAAI,CAAC,EAAEtB,IAAI,CAACI,MAAM,CAACmB,cAAc,IAAI,CAAC,CAAC,CAAC;IACnIV,KAAK,GAAGD,MAAM,GAAGY,QAAQ,CAACC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC;EAC7C,CAAC;EACDlB,GAAG,CAACmB,mBAAmB,CAAC,MAAM;IAC1Bb,KAAK,GAAGD,MAAM,GAAG,CAAC,CAAC;IACnBO,oBAAoB,CAAC,CAAC;IACtBL,SAAS,CAAC,CAAC;EACf,CAAC,CAAC;EACFP,GAAG,CAACoB,kBAAkB,CAAC,MAAM;IACzBd,KAAK,GAAGD,MAAM,GAAGG,SAAS;EAC9B,CAAC,CAAC;EACFR,GAAG,CAACU,MAAM,CAACC,MAAM,CAACC,oBAAoB,EAAE,EAAE,EAAE,KAAK,CAAC;EAClD,IAAIK,QAAQ,CAACC,MAAM,KAAKV,SAAS,EAAE;IAC/BR,GAAG,CAACqB,mBAAmB,CAACJ,QAAQ,EAAE,kBAAkB,EAAEL,oBAAoB,EAAE,KAAK,EAAE,KAAK,CAAC;EAC7F;AACJ;AACA1B,OAAO,CAACoC,OAAO,GAAGvB,SAAS"},"metadata":{},"sourceType":"script"}