{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getExceptionMessageFromEvent = exports.getExceptionMessage = void 0;\nconst messages_gen_js_1 = require(\"../app/messages.gen.js\");\nconst error_stack_parser_1 = __importDefault(require(\"error-stack-parser\"));\nfunction getDefaultStack(e) {\n  return [{\n    columnNumber: e.colno,\n    lineNumber: e.lineno,\n    fileName: e.filename,\n    functionName: '',\n    source: ''\n  }];\n}\nfunction getExceptionMessage(error, fallbackStack, metadata = {}) {\n  let stack = fallbackStack;\n  try {\n    stack = error_stack_parser_1.default.parse(error);\n  } catch (e) {}\n  return (0, messages_gen_js_1.JSException)(error.name, error.message, JSON.stringify(stack), JSON.stringify(metadata));\n}\nexports.getExceptionMessage = getExceptionMessage;\nfunction getExceptionMessageFromEvent(e, context = window, metadata = {}) {\n  if (e instanceof ErrorEvent) {\n    if (e.error instanceof Error) {\n      return getExceptionMessage(e.error, getDefaultStack(e), metadata);\n    } else {\n      let [name, message] = e.message.split(':');\n      if (!message) {\n        name = 'Error';\n        message = e.message;\n      }\n      return (0, messages_gen_js_1.JSException)(name, message, JSON.stringify(getDefaultStack(e)), JSON.stringify(metadata));\n    }\n  } else if ('PromiseRejectionEvent' in context && e instanceof context.PromiseRejectionEvent) {\n    if (e.reason instanceof Error) {\n      return getExceptionMessage(e.reason, [], metadata);\n    } else {\n      let message;\n      try {\n        message = JSON.stringify(e.reason);\n      } catch (_) {\n        message = String(e.reason);\n      }\n      return (0, messages_gen_js_1.JSException)('Unhandled Promise Rejection', message, '[]', JSON.stringify(metadata));\n    }\n  }\n  return null;\n}\nexports.getExceptionMessageFromEvent = getExceptionMessageFromEvent;\nfunction default_1(app, opts) {\n  const options = Object.assign({\n    captureExceptions: true\n  }, opts);\n  function patchContext(context) {\n    function handler(e) {\n      const msg = getExceptionMessageFromEvent(e, context);\n      if (msg != null) {\n        app.send(msg);\n      }\n    }\n    app.attachEventListener(context, 'unhandledrejection', handler);\n    app.attachEventListener(context, 'error', handler);\n  }\n  if (options.captureExceptions) {\n    app.observer.attachContextCallback(patchContext); // TODO: attach once-per-iframe (?)\n    patchContext(window);\n  }\n}\nexports.default = default_1;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","getExceptionMessageFromEvent","getExceptionMessage","messages_gen_js_1","require","error_stack_parser_1","getDefaultStack","e","columnNumber","colno","lineNumber","lineno","fileName","filename","functionName","source","error","fallbackStack","metadata","stack","default","parse","JSException","name","message","JSON","stringify","context","window","ErrorEvent","Error","split","PromiseRejectionEvent","reason","_","String","default_1","app","opts","options","assign","captureExceptions","patchContext","handler","msg","send","attachEventListener","observer","attachContextCallback"],"sources":["/Users/paramvirrotwal/Observability/website-admin-react-web-app-project/node_modules/@openreplay/tracker/cjs/modules/exception.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getExceptionMessageFromEvent = exports.getExceptionMessage = void 0;\nconst messages_gen_js_1 = require(\"../app/messages.gen.js\");\nconst error_stack_parser_1 = __importDefault(require(\"error-stack-parser\"));\nfunction getDefaultStack(e) {\n    return [\n        {\n            columnNumber: e.colno,\n            lineNumber: e.lineno,\n            fileName: e.filename,\n            functionName: '',\n            source: '',\n        },\n    ];\n}\nfunction getExceptionMessage(error, fallbackStack, metadata = {}) {\n    let stack = fallbackStack;\n    try {\n        stack = error_stack_parser_1.default.parse(error);\n    }\n    catch (e) { }\n    return (0, messages_gen_js_1.JSException)(error.name, error.message, JSON.stringify(stack), JSON.stringify(metadata));\n}\nexports.getExceptionMessage = getExceptionMessage;\nfunction getExceptionMessageFromEvent(e, context = window, metadata = {}) {\n    if (e instanceof ErrorEvent) {\n        if (e.error instanceof Error) {\n            return getExceptionMessage(e.error, getDefaultStack(e), metadata);\n        }\n        else {\n            let [name, message] = e.message.split(':');\n            if (!message) {\n                name = 'Error';\n                message = e.message;\n            }\n            return (0, messages_gen_js_1.JSException)(name, message, JSON.stringify(getDefaultStack(e)), JSON.stringify(metadata));\n        }\n    }\n    else if ('PromiseRejectionEvent' in context && e instanceof context.PromiseRejectionEvent) {\n        if (e.reason instanceof Error) {\n            return getExceptionMessage(e.reason, [], metadata);\n        }\n        else {\n            let message;\n            try {\n                message = JSON.stringify(e.reason);\n            }\n            catch (_) {\n                message = String(e.reason);\n            }\n            return (0, messages_gen_js_1.JSException)('Unhandled Promise Rejection', message, '[]', JSON.stringify(metadata));\n        }\n    }\n    return null;\n}\nexports.getExceptionMessageFromEvent = getExceptionMessageFromEvent;\nfunction default_1(app, opts) {\n    const options = Object.assign({\n        captureExceptions: true,\n    }, opts);\n    function patchContext(context) {\n        function handler(e) {\n            const msg = getExceptionMessageFromEvent(e, context);\n            if (msg != null) {\n                app.send(msg);\n            }\n        }\n        app.attachEventListener(context, 'unhandledrejection', handler);\n        app.attachEventListener(context, 'error', handler);\n    }\n    if (options.captureExceptions) {\n        app.observer.attachContextCallback(patchContext); // TODO: attach once-per-iframe (?)\n        patchContext(window);\n    }\n}\nexports.default = default_1;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}