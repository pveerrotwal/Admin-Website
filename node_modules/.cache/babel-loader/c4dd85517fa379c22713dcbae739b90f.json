{"ast":null,"code":"import * as styles from './styles.js';\nimport Recorder, { Quality } from './recorder.js';\nimport attachDND from './dnd.js';\nimport { generateGrid, generateChevron, createSpinner, createElement, TEST_START, TASK_IND, SESSION_ID, TEST_ID } from './utils.js';\nimport SignalManager from './SignalManager.js';\nexport default class UserTestManager {\n  constructor(app, storageKey) {\n    this.app = app;\n    this.storageKey = storageKey;\n    this.bg = createElement('div', 'bg', styles.bgStyle, undefined, '__or_ut_bg');\n    this.container = createElement('div', 'container', styles.containerStyle, undefined, '__or_ut_ct');\n    this.widgetGuidelinesVisible = true;\n    this.widgetTasksVisible = false;\n    this.widgetVisible = true;\n    this.isActive = false;\n    this.descriptionSection = null;\n    this.taskSection = null;\n    this.endSection = null;\n    this.stopButton = null;\n    this.stopButtonContainer = null;\n    this.test = null;\n    this.testId = null;\n    this.signalManager = null;\n    this.getTest = (id, token, inProgress) => {\n      this.testId = id;\n      const ingest = this.app.options.ingestPoint;\n      return fetch(`${ingest}/v1/web/uxt/test/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(res => res.json()).then(({\n        test\n      }) => {\n        this.isActive = true;\n        this.test = test;\n        this.signalManager = new SignalManager(this.app.options.ingestPoint, () => this.app.timestamp(), token, id, this.storageKey, (k, v) => this.app.localStorage.setItem(k, v), k => this.app.localStorage.removeItem(k), k => this.app.localStorage.getItem(k), () => this.app.getSessionID());\n        this.createGreeting(test.title, test.reqMic, test.reqCamera);\n        if (inProgress) {\n          if (test.reqMic || test.reqCamera) {\n            void this.userRecorder.startRecording(30, Quality.Standard, test.reqMic, test.reqCamera);\n          }\n          this.showWidget(test.description, test.tasks, true);\n          this.showTaskSection();\n        }\n      }).then(() => id).catch(err => {\n        console.log('OR: Error fetching test', err);\n      });\n    };\n    this.hideTaskSection = () => false;\n    this.showTaskSection = () => true;\n    this.collapseWidget = () => false;\n    this.removeGreeting = () => false;\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    this.toggleDescriptionVisibility = () => {};\n    this.currentTaskIndex = 0;\n    this.userRecorder = new Recorder(app);\n    const sessionId = this.app.getSessionID();\n    const savedSessionId = this.app.localStorage.getItem(SESSION_ID);\n    if (sessionId !== savedSessionId) {\n      this.app.localStorage.removeItem(this.storageKey);\n      this.app.localStorage.removeItem(SESSION_ID);\n      this.app.localStorage.removeItem(TEST_ID);\n      this.app.localStorage.removeItem(TASK_IND);\n      this.app.localStorage.removeItem(TEST_START);\n    }\n    const taskIndex = this.app.localStorage.getItem(TASK_IND);\n    if (taskIndex) {\n      this.currentTaskIndex = parseInt(taskIndex, 10);\n    }\n  }\n  getTestId() {\n    return this.testId;\n  }\n  createGreeting(title, micRequired, cameraRequired) {\n    const titleElement = createElement('div', 'title', styles.titleStyle, title);\n    const descriptionElement = createElement('div', 'description', styles.descriptionStyle, `Welcome, you're here to help us improve, not to be judged. Your insights matter!\\n\n📹 We're recording this browser tab to learn from your experience.\n🎤 Please enable mic and camera if asked, to give us a complete picture.`);\n    const buttonElement = createElement('div', 'button', styles.buttonStyle, 'Read guidelines to begin');\n    this.removeGreeting = () => {\n      // this.container.innerHTML = ''\n      if (micRequired || cameraRequired) {\n        void this.userRecorder.startRecording(30, Quality.Standard, micRequired, cameraRequired);\n      }\n      this.container.removeChild(buttonElement);\n      this.container.removeChild(descriptionElement);\n      this.container.removeChild(titleElement);\n      return false;\n    };\n    buttonElement.onclick = () => {\n      var _a, _b, _c, _d;\n      this.removeGreeting();\n      const durations = (_a = this.signalManager) === null || _a === void 0 ? void 0 : _a.getDurations();\n      if (durations && this.signalManager) {\n        durations.testStart = this.app.timestamp();\n        this.signalManager.setDurations(durations);\n      }\n      void ((_b = this.signalManager) === null || _b === void 0 ? void 0 : _b.signalTest('begin'));\n      this.container.style.fontFamily = `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`;\n      Object.assign(this.container.style, styles.containerWidgetStyle);\n      this.showWidget(((_c = this.test) === null || _c === void 0 ? void 0 : _c.guidelines) || '', ((_d = this.test) === null || _d === void 0 ? void 0 : _d.tasks) || []);\n    };\n    this.container.append(titleElement, descriptionElement, buttonElement);\n    this.bg.appendChild(this.container);\n    document.body.appendChild(this.bg);\n  }\n  showWidget(guidelines, tasks, inProgress) {\n    this.container.innerHTML = '';\n    Object.assign(this.bg.style, {\n      position: 'fixed',\n      zIndex: 99999999999999,\n      right: '8px',\n      left: 'unset',\n      width: 'fit-content',\n      top: '8px',\n      height: 'fit-content',\n      background: 'unset',\n      display: 'unset',\n      alignItems: 'unset',\n      justifyContent: 'unset'\n    });\n    // Create title section\n    const titleSection = this.createTitleSection();\n    this.container.style.fontFamily = `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`;\n    Object.assign(this.container.style, styles.containerWidgetStyle);\n    const descriptionSection = this.createDescriptionSection(guidelines);\n    const tasksSection = this.createTasksSection(tasks);\n    const stopButton = createElement('div', 'stop_bn_or', styles.stopWidgetStyle, 'Abort Session');\n    const stopContainer = createElement('div', 'stop_ct_or', {\n      fontSize: '13px!important'\n    });\n    stopContainer.style.fontSize = '13px';\n    stopContainer.append(stopButton);\n    this.container.append(titleSection, descriptionSection, tasksSection, stopContainer);\n    this.taskSection = tasksSection;\n    this.descriptionSection = descriptionSection;\n    this.stopButton = stopButton;\n    this.stopButtonContainer = stopContainer;\n    stopButton.onclick = () => {\n      var _a;\n      this.userRecorder.discard();\n      void ((_a = this.signalManager) === null || _a === void 0 ? void 0 : _a.signalTest('skipped'));\n      document.body.removeChild(this.bg);\n      window.close();\n    };\n    if (!inProgress) {\n      this.hideTaskSection();\n    } else {\n      this.toggleDescriptionVisibility();\n    }\n  }\n  createTitleSection() {\n    var _a;\n    const title = createElement('div', 'title', styles.titleWidgetStyle);\n    const leftIcon = generateGrid();\n    const titleText = createElement('div', 'title_text', {\n      maxWidth: '19rem',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      width: '100%',\n      fontSize: 16,\n      lineHeight: 'auto',\n      cursor: 'pointer'\n    }, (_a = this.test) === null || _a === void 0 ? void 0 : _a.title);\n    const rightIcon = generateChevron();\n    title.append(leftIcon, titleText, rightIcon);\n    const toggleWidget = isVisible => {\n      this.widgetVisible = isVisible;\n      this.container.style.fontFamily = `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`;\n      Object.assign(this.container.style, this.widgetVisible ? styles.containerWidgetStyle : {\n        border: 'none',\n        background: 'none',\n        padding: 0\n      });\n      if (this.taskSection) {\n        Object.assign(this.taskSection.style, this.widgetVisible ? styles.descriptionWidgetStyle : {\n          display: 'none'\n        });\n      }\n      if (this.descriptionSection) {\n        Object.assign(this.descriptionSection.style, this.widgetVisible ? styles.descriptionWidgetStyle : {\n          display: 'none'\n        });\n      }\n      if (this.endSection) {\n        Object.assign(this.endSection.style, this.widgetVisible ? styles.descriptionWidgetStyle : {\n          display: 'none'\n        });\n      }\n      if (this.stopButton) {\n        Object.assign(this.stopButton.style, this.widgetVisible ? styles.stopWidgetStyle : {\n          display: 'none'\n        });\n      }\n      return isVisible;\n    };\n    const collapseWidget = () => {\n      Object.assign(rightIcon.style, {\n        transform: this.widgetVisible ? 'rotate(0deg)' : 'rotate(180deg)'\n      });\n      toggleWidget(!this.widgetVisible);\n    };\n    titleText.onclick = collapseWidget;\n    rightIcon.onclick = collapseWidget;\n    attachDND(this.bg, leftIcon);\n    this.collapseWidget = () => toggleWidget(false);\n    return title;\n  }\n  createDescriptionSection(guidelines) {\n    const section = createElement('div', 'description_section_or', styles.descriptionWidgetStyle);\n    const titleContainer = createElement('div', 'description_s_title_or', styles.sectionTitleStyle);\n    const title = createElement('div', 'title', {\n      fontSize: 13,\n      fontWeight: 500,\n      lineHeight: 'auto'\n    }, 'Introduction & Guidelines');\n    const icon = createElement('div', 'icon', styles.symbolIcon, '-');\n    const content = createElement('div', 'content', styles.contentStyle);\n    const descriptionC = createElement('div', 'text_description', {\n      maxHeight: '250px',\n      overflowY: 'auto',\n      whiteSpace: 'pre-wrap',\n      fontSize: 13,\n      color: '#454545',\n      lineHeight: 'auto'\n    });\n    descriptionC.innerHTML = guidelines;\n    const button = createElement('div', 'button_begin_or', styles.buttonWidgetStyle, 'Begin Test');\n    titleContainer.append(title, icon);\n    content.append(descriptionC, button);\n    section.append(titleContainer, content);\n    const toggleDescriptionVisibility = () => {\n      this.widgetGuidelinesVisible = !this.widgetGuidelinesVisible;\n      icon.textContent = this.widgetGuidelinesVisible ? '-' : '+';\n      Object.assign(content.style, this.widgetGuidelinesVisible ? styles.contentStyle : {\n        display: 'none'\n      });\n    };\n    titleContainer.onclick = toggleDescriptionVisibility;\n    this.toggleDescriptionVisibility = () => {\n      this.widgetGuidelinesVisible = false;\n      icon.textContent = this.widgetGuidelinesVisible ? '-' : '+';\n      Object.assign(content.style, this.widgetGuidelinesVisible ? styles.contentStyle : {\n        display: 'none'\n      });\n      content.removeChild(button);\n    };\n    button.onclick = () => {\n      var _a, _b, _c;\n      toggleDescriptionVisibility();\n      if (this.test) {\n        const durations = (_a = this.signalManager) === null || _a === void 0 ? void 0 : _a.getDurations();\n        const taskDurationInd = durations ? durations.tasks.findIndex(t => this.test && t.taskId === this.test.tasks[0].task_id) : null;\n        if (durations && taskDurationInd === -1) {\n          durations.tasks.push({\n            taskId: this.test.tasks[0].task_id,\n            started: this.app.timestamp()\n          });\n          (_b = this.signalManager) === null || _b === void 0 ? void 0 : _b.setDurations(durations);\n        }\n        void ((_c = this.signalManager) === null || _c === void 0 ? void 0 : _c.signalTask(this.test.tasks[0].task_id, 'begin'));\n      }\n      this.showTaskSection();\n      content.removeChild(button);\n    };\n    return section;\n  }\n  createTasksSection(tasks) {\n    this.container.style.fontFamily = `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`;\n    Object.assign(this.container.style, styles.containerWidgetStyle);\n    const section = createElement('div', 'task_section_or', styles.descriptionWidgetStyle);\n    const titleContainer = createElement('div', 'description_t_title_or', styles.sectionTitleStyle);\n    const title = createElement('div', 'title', {\n      fontSize: '13px',\n      fontWeight: '500',\n      lineHeight: 'auto'\n    }, 'Tasks');\n    const icon = createElement('div', 'icon', styles.symbolIcon, '-');\n    const content = createElement('div', 'content', styles.contentStyle);\n    const pagination = createElement('div', 'pagination', styles.paginationStyle);\n    // const leftArrow = createElement('span', 'leftArrow', {}, '<')\n    // const rightArrow = createElement('span', 'rightArrow', {}, '>')\n    const taskCard = createElement('div', 'taskCard', styles.taskDescriptionCard);\n    const taskText = createElement('div', 'taskText', styles.taskTextStyle);\n    const taskDescription = createElement('div', 'taskDescription', styles.taskDescriptionStyle);\n    const taskButtons = createElement('div', 'taskButtons', styles.taskButtonsRow);\n    const inputTitle = createElement('div', 'taskText', styles.taskTextStyle);\n    inputTitle.textContent = 'Your answer';\n    const inputArea = createElement('textarea', 'taskDescription', {\n      resize: 'vertical'\n    });\n    const inputContainer = createElement('div', 'inputArea', styles.taskDescriptionCard);\n    inputContainer.append(inputTitle, inputArea);\n    const closePanelButton = createElement('div', 'closePanelButton', styles.taskButtonStyle, 'Collapse Panel');\n    const nextButton = createElement('div', 'nextButton', styles.taskButtonBorderedStyle, 'Done, Next');\n    titleContainer.append(title, icon);\n    taskCard.append(taskText, taskDescription);\n    taskButtons.append(closePanelButton, nextButton);\n    content.append(pagination, taskCard, inputContainer, taskButtons);\n    section.append(titleContainer, content);\n    const updateTaskContent = () => {\n      const task = tasks[this.currentTaskIndex];\n      taskText.textContent = task.title;\n      taskDescription.textContent = task.description;\n      if (task.allow_typing) {\n        inputContainer.style.display = 'flex';\n      } else {\n        inputContainer.style.display = 'none';\n      }\n    };\n    // pagination.appendChild(leftArrow)\n    tasks.forEach((_, index) => {\n      const pageNumber = createElement('span', `or_task_${index}`, {\n        outline: '1px solid #efefef',\n        fontSize: '13px',\n        height: '24px',\n        width: '24px',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        borderRadius: '6.25em'\n      }, (index + 1).toString());\n      pageNumber.id = `or_task_${index}`;\n      pagination.append(pageNumber);\n    });\n    // pagination.appendChild(rightArrow)\n    const toggleTasksVisibility = () => {\n      this.widgetTasksVisible = !this.widgetTasksVisible;\n      icon.textContent = this.widgetTasksVisible ? '-' : '+';\n      Object.assign(content.style, this.widgetTasksVisible ? styles.contentStyle : {\n        display: 'none'\n      });\n    };\n    this.hideTaskSection = () => {\n      icon.textContent = '+';\n      Object.assign(content.style, {\n        display: 'none'\n      });\n      this.widgetTasksVisible = false;\n      return false;\n    };\n    this.showTaskSection = () => {\n      icon.textContent = '-';\n      Object.assign(content.style, styles.contentStyle);\n      this.widgetTasksVisible = true;\n      return true;\n    };\n    const highlightActive = () => {\n      const activeTaskEl = document.getElementById(`or_task_${this.currentTaskIndex}`);\n      if (activeTaskEl) {\n        Object.assign(activeTaskEl.style, styles.taskNumberActive);\n      }\n      for (let i = 0; i < this.currentTaskIndex; i++) {\n        const taskEl = document.getElementById(`or_task_${i}`);\n        if (taskEl) {\n          Object.assign(taskEl.style, styles.taskNumberDone);\n        }\n      }\n    };\n    titleContainer.onclick = toggleTasksVisibility;\n    closePanelButton.onclick = this.collapseWidget;\n    nextButton.onclick = () => {\n      var _a, _b, _c, _d;\n      const textAnswer = tasks[this.currentTaskIndex].allow_typing ? inputArea.value : undefined;\n      inputArea.value = '';\n      void ((_a = this.signalManager) === null || _a === void 0 ? void 0 : _a.signalTask(tasks[this.currentTaskIndex].task_id, 'done', textAnswer));\n      if (this.currentTaskIndex < tasks.length - 1) {\n        this.currentTaskIndex++;\n        updateTaskContent();\n        const durations = (_b = this.signalManager) === null || _b === void 0 ? void 0 : _b.getDurations();\n        if (durations && durations.tasks.findIndex(t => t.taskId === tasks[this.currentTaskIndex].task_id) === -1) {\n          durations.tasks.push({\n            taskId: tasks[this.currentTaskIndex].task_id,\n            started: this.app.timestamp()\n          });\n          (_c = this.signalManager) === null || _c === void 0 ? void 0 : _c.setDurations(durations);\n        }\n        void ((_d = this.signalManager) === null || _d === void 0 ? void 0 : _d.signalTask(tasks[this.currentTaskIndex].task_id, 'begin'));\n        highlightActive();\n      } else {\n        this.showEndSection();\n      }\n      this.app.localStorage.setItem('or_uxt_task_index', this.currentTaskIndex.toString());\n    };\n    setTimeout(() => {\n      const firstTaskEl = document.getElementById('or_task_0');\n      if (firstTaskEl) {\n        Object.assign(firstTaskEl.style, styles.taskNumberActive);\n      }\n      updateTaskContent();\n      highlightActive();\n    }, 1);\n    return section;\n  }\n  showEndSection() {\n    var _a, _b, _c, _d, _e;\n    let isLoading = true;\n    void ((_a = this.signalManager) === null || _a === void 0 ? void 0 : _a.signalTest('done'));\n    const section = createElement('div', 'end_section_or', styles.endSectionStyle);\n    const title = createElement('div', 'end_title_or', {\n      fontSize: '1.25rem',\n      fontWeight: '500'\n    }, 'Thank you! 👍');\n    const description = createElement('div', 'end_description_or', {}, (_c = (_b = this.test) === null || _b === void 0 ? void 0 : _b.conclusion) !== null && _c !== void 0 ? _c : 'Thank you for participating in our usability test. Your feedback has been captured and will be used to enhance our website. \\n' + '\\n' + 'We appreciate your time and valuable input.');\n    const button = createElement('div', 'end_button_or', styles.buttonWidgetStyle, 'Submitting Feedback');\n    const spinner = createSpinner();\n    button.appendChild(spinner);\n    if (((_d = this.test) === null || _d === void 0 ? void 0 : _d.reqMic) || ((_e = this.test) === null || _e === void 0 ? void 0 : _e.reqCamera)) {\n      void this.userRecorder.sendToAPI().then(() => {\n        button.removeChild(spinner);\n        button.textContent = 'End Session';\n        isLoading = false;\n      }).catch(err => {\n        console.error(err);\n        button.removeChild(spinner);\n        button.textContent = 'End Session';\n        isLoading = false;\n      });\n    } else {\n      button.removeChild(spinner);\n      button.textContent = 'End Session';\n      isLoading = false;\n    }\n    if (this.taskSection) {\n      this.container.removeChild(this.taskSection);\n    }\n    if (this.descriptionSection) {\n      this.container.removeChild(this.descriptionSection);\n    }\n    if (this.stopButton && this.stopButtonContainer) {\n      this.container.removeChild(this.stopButtonContainer);\n    }\n    button.onclick = () => {\n      if (isLoading) return;\n      window.close();\n      document.body.removeChild(this.bg);\n    };\n    section.append(title, description, button);\n    this.endSection = section;\n    this.container.append(section);\n  }\n}","map":{"version":3,"names":["styles","Recorder","Quality","attachDND","generateGrid","generateChevron","createSpinner","createElement","TEST_START","TASK_IND","SESSION_ID","TEST_ID","SignalManager","UserTestManager","constructor","app","storageKey","bg","bgStyle","undefined","container","containerStyle","widgetGuidelinesVisible","widgetTasksVisible","widgetVisible","isActive","descriptionSection","taskSection","endSection","stopButton","stopButtonContainer","test","testId","signalManager","getTest","id","token","inProgress","ingest","options","ingestPoint","fetch","headers","Authorization","then","res","json","timestamp","k","v","localStorage","setItem","removeItem","getItem","getSessionID","createGreeting","title","reqMic","reqCamera","userRecorder","startRecording","Standard","showWidget","description","tasks","showTaskSection","catch","err","console","log","hideTaskSection","collapseWidget","removeGreeting","toggleDescriptionVisibility","currentTaskIndex","sessionId","savedSessionId","taskIndex","parseInt","getTestId","micRequired","cameraRequired","titleElement","titleStyle","descriptionElement","descriptionStyle","buttonElement","buttonStyle","removeChild","onclick","_a","_b","_c","_d","durations","getDurations","testStart","setDurations","signalTest","style","fontFamily","Object","assign","containerWidgetStyle","guidelines","append","appendChild","document","body","innerHTML","position","zIndex","right","left","width","top","height","background","display","alignItems","justifyContent","titleSection","createTitleSection","createDescriptionSection","tasksSection","createTasksSection","stopWidgetStyle","stopContainer","fontSize","discard","window","close","titleWidgetStyle","leftIcon","titleText","maxWidth","overflow","textOverflow","lineHeight","cursor","rightIcon","toggleWidget","isVisible","border","padding","descriptionWidgetStyle","transform","section","titleContainer","sectionTitleStyle","fontWeight","icon","symbolIcon","content","contentStyle","descriptionC","maxHeight","overflowY","whiteSpace","color","button","buttonWidgetStyle","textContent","taskDurationInd","findIndex","t","taskId","task_id","push","started","signalTask","pagination","paginationStyle","taskCard","taskDescriptionCard","taskText","taskTextStyle","taskDescription","taskDescriptionStyle","taskButtons","taskButtonsRow","inputTitle","inputArea","resize","inputContainer","closePanelButton","taskButtonStyle","nextButton","taskButtonBorderedStyle","updateTaskContent","task","allow_typing","forEach","_","index","pageNumber","outline","flexDirection","borderRadius","toString","toggleTasksVisibility","highlightActive","activeTaskEl","getElementById","taskNumberActive","i","taskEl","taskNumberDone","textAnswer","value","length","showEndSection","setTimeout","firstTaskEl","_e","isLoading","endSectionStyle","conclusion","spinner","sendToAPI","error"],"sources":["/Users/paramvirrotwal/Observability/website-admin-react-web-app-project/node_modules/@openreplay/tracker/lib/modules/userTesting/index.js"],"sourcesContent":["import * as styles from './styles.js';\nimport Recorder, { Quality } from './recorder.js';\nimport attachDND from './dnd.js';\nimport { generateGrid, generateChevron, createSpinner, createElement, TEST_START, TASK_IND, SESSION_ID, TEST_ID, } from './utils.js';\nimport SignalManager from './SignalManager.js';\nexport default class UserTestManager {\n    constructor(app, storageKey) {\n        this.app = app;\n        this.storageKey = storageKey;\n        this.bg = createElement('div', 'bg', styles.bgStyle, undefined, '__or_ut_bg');\n        this.container = createElement('div', 'container', styles.containerStyle, undefined, '__or_ut_ct');\n        this.widgetGuidelinesVisible = true;\n        this.widgetTasksVisible = false;\n        this.widgetVisible = true;\n        this.isActive = false;\n        this.descriptionSection = null;\n        this.taskSection = null;\n        this.endSection = null;\n        this.stopButton = null;\n        this.stopButtonContainer = null;\n        this.test = null;\n        this.testId = null;\n        this.signalManager = null;\n        this.getTest = (id, token, inProgress) => {\n            this.testId = id;\n            const ingest = this.app.options.ingestPoint;\n            return fetch(`${ingest}/v1/web/uxt/test/${id}`, {\n                headers: {\n                    Authorization: `Bearer ${token}`,\n                },\n            })\n                .then((res) => res.json())\n                .then(({ test }) => {\n                this.isActive = true;\n                this.test = test;\n                this.signalManager = new SignalManager(this.app.options.ingestPoint, () => this.app.timestamp(), token, id, this.storageKey, (k, v) => this.app.localStorage.setItem(k, v), (k) => this.app.localStorage.removeItem(k), (k) => this.app.localStorage.getItem(k), () => this.app.getSessionID());\n                this.createGreeting(test.title, test.reqMic, test.reqCamera);\n                if (inProgress) {\n                    if (test.reqMic || test.reqCamera) {\n                        void this.userRecorder.startRecording(30, Quality.Standard, test.reqMic, test.reqCamera);\n                    }\n                    this.showWidget(test.description, test.tasks, true);\n                    this.showTaskSection();\n                }\n            })\n                .then(() => id)\n                .catch((err) => {\n                console.log('OR: Error fetching test', err);\n            });\n        };\n        this.hideTaskSection = () => false;\n        this.showTaskSection = () => true;\n        this.collapseWidget = () => false;\n        this.removeGreeting = () => false;\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        this.toggleDescriptionVisibility = () => { };\n        this.currentTaskIndex = 0;\n        this.userRecorder = new Recorder(app);\n        const sessionId = this.app.getSessionID();\n        const savedSessionId = this.app.localStorage.getItem(SESSION_ID);\n        if (sessionId !== savedSessionId) {\n            this.app.localStorage.removeItem(this.storageKey);\n            this.app.localStorage.removeItem(SESSION_ID);\n            this.app.localStorage.removeItem(TEST_ID);\n            this.app.localStorage.removeItem(TASK_IND);\n            this.app.localStorage.removeItem(TEST_START);\n        }\n        const taskIndex = this.app.localStorage.getItem(TASK_IND);\n        if (taskIndex) {\n            this.currentTaskIndex = parseInt(taskIndex, 10);\n        }\n    }\n    getTestId() {\n        return this.testId;\n    }\n    createGreeting(title, micRequired, cameraRequired) {\n        const titleElement = createElement('div', 'title', styles.titleStyle, title);\n        const descriptionElement = createElement('div', 'description', styles.descriptionStyle, `Welcome, you're here to help us improve, not to be judged. Your insights matter!\\n\n📹 We're recording this browser tab to learn from your experience.\n🎤 Please enable mic and camera if asked, to give us a complete picture.`);\n        const buttonElement = createElement('div', 'button', styles.buttonStyle, 'Read guidelines to begin');\n        this.removeGreeting = () => {\n            // this.container.innerHTML = ''\n            if (micRequired || cameraRequired) {\n                void this.userRecorder.startRecording(30, Quality.Standard, micRequired, cameraRequired);\n            }\n            this.container.removeChild(buttonElement);\n            this.container.removeChild(descriptionElement);\n            this.container.removeChild(titleElement);\n            return false;\n        };\n        buttonElement.onclick = () => {\n            var _a, _b, _c, _d;\n            this.removeGreeting();\n            const durations = (_a = this.signalManager) === null || _a === void 0 ? void 0 : _a.getDurations();\n            if (durations && this.signalManager) {\n                durations.testStart = this.app.timestamp();\n                this.signalManager.setDurations(durations);\n            }\n            void ((_b = this.signalManager) === null || _b === void 0 ? void 0 : _b.signalTest('begin'));\n            this.container.style.fontFamily = `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`;\n            Object.assign(this.container.style, styles.containerWidgetStyle);\n            this.showWidget(((_c = this.test) === null || _c === void 0 ? void 0 : _c.guidelines) || '', ((_d = this.test) === null || _d === void 0 ? void 0 : _d.tasks) || []);\n        };\n        this.container.append(titleElement, descriptionElement, buttonElement);\n        this.bg.appendChild(this.container);\n        document.body.appendChild(this.bg);\n    }\n    showWidget(guidelines, tasks, inProgress) {\n        this.container.innerHTML = '';\n        Object.assign(this.bg.style, {\n            position: 'fixed',\n            zIndex: 99999999999999,\n            right: '8px',\n            left: 'unset',\n            width: 'fit-content',\n            top: '8px',\n            height: 'fit-content',\n            background: 'unset',\n            display: 'unset',\n            alignItems: 'unset',\n            justifyContent: 'unset',\n        });\n        // Create title section\n        const titleSection = this.createTitleSection();\n        this.container.style.fontFamily = `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`;\n        Object.assign(this.container.style, styles.containerWidgetStyle);\n        const descriptionSection = this.createDescriptionSection(guidelines);\n        const tasksSection = this.createTasksSection(tasks);\n        const stopButton = createElement('div', 'stop_bn_or', styles.stopWidgetStyle, 'Abort Session');\n        const stopContainer = createElement('div', 'stop_ct_or', { fontSize: '13px!important' });\n        stopContainer.style.fontSize = '13px';\n        stopContainer.append(stopButton);\n        this.container.append(titleSection, descriptionSection, tasksSection, stopContainer);\n        this.taskSection = tasksSection;\n        this.descriptionSection = descriptionSection;\n        this.stopButton = stopButton;\n        this.stopButtonContainer = stopContainer;\n        stopButton.onclick = () => {\n            var _a;\n            this.userRecorder.discard();\n            void ((_a = this.signalManager) === null || _a === void 0 ? void 0 : _a.signalTest('skipped'));\n            document.body.removeChild(this.bg);\n            window.close();\n        };\n        if (!inProgress) {\n            this.hideTaskSection();\n        }\n        else {\n            this.toggleDescriptionVisibility();\n        }\n    }\n    createTitleSection() {\n        var _a;\n        const title = createElement('div', 'title', styles.titleWidgetStyle);\n        const leftIcon = generateGrid();\n        const titleText = createElement('div', 'title_text', {\n            maxWidth: '19rem',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n            width: '100%',\n            fontSize: 16,\n            lineHeight: 'auto',\n            cursor: 'pointer',\n        }, (_a = this.test) === null || _a === void 0 ? void 0 : _a.title);\n        const rightIcon = generateChevron();\n        title.append(leftIcon, titleText, rightIcon);\n        const toggleWidget = (isVisible) => {\n            this.widgetVisible = isVisible;\n            this.container.style.fontFamily = `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`;\n            Object.assign(this.container.style, this.widgetVisible\n                ? styles.containerWidgetStyle\n                : { border: 'none', background: 'none', padding: 0 });\n            if (this.taskSection) {\n                Object.assign(this.taskSection.style, this.widgetVisible ? styles.descriptionWidgetStyle : { display: 'none' });\n            }\n            if (this.descriptionSection) {\n                Object.assign(this.descriptionSection.style, this.widgetVisible ? styles.descriptionWidgetStyle : { display: 'none' });\n            }\n            if (this.endSection) {\n                Object.assign(this.endSection.style, this.widgetVisible ? styles.descriptionWidgetStyle : { display: 'none' });\n            }\n            if (this.stopButton) {\n                Object.assign(this.stopButton.style, this.widgetVisible ? styles.stopWidgetStyle : { display: 'none' });\n            }\n            return isVisible;\n        };\n        const collapseWidget = () => {\n            Object.assign(rightIcon.style, {\n                transform: this.widgetVisible ? 'rotate(0deg)' : 'rotate(180deg)',\n            });\n            toggleWidget(!this.widgetVisible);\n        };\n        titleText.onclick = collapseWidget;\n        rightIcon.onclick = collapseWidget;\n        attachDND(this.bg, leftIcon);\n        this.collapseWidget = () => toggleWidget(false);\n        return title;\n    }\n    createDescriptionSection(guidelines) {\n        const section = createElement('div', 'description_section_or', styles.descriptionWidgetStyle);\n        const titleContainer = createElement('div', 'description_s_title_or', styles.sectionTitleStyle);\n        const title = createElement('div', 'title', {\n            fontSize: 13,\n            fontWeight: 500,\n            lineHeight: 'auto',\n        }, 'Introduction & Guidelines');\n        const icon = createElement('div', 'icon', styles.symbolIcon, '-');\n        const content = createElement('div', 'content', styles.contentStyle);\n        const descriptionC = createElement('div', 'text_description', {\n            maxHeight: '250px',\n            overflowY: 'auto',\n            whiteSpace: 'pre-wrap',\n            fontSize: 13,\n            color: '#454545',\n            lineHeight: 'auto',\n        });\n        descriptionC.innerHTML = guidelines;\n        const button = createElement('div', 'button_begin_or', styles.buttonWidgetStyle, 'Begin Test');\n        titleContainer.append(title, icon);\n        content.append(descriptionC, button);\n        section.append(titleContainer, content);\n        const toggleDescriptionVisibility = () => {\n            this.widgetGuidelinesVisible = !this.widgetGuidelinesVisible;\n            icon.textContent = this.widgetGuidelinesVisible ? '-' : '+';\n            Object.assign(content.style, this.widgetGuidelinesVisible ? styles.contentStyle : { display: 'none' });\n        };\n        titleContainer.onclick = toggleDescriptionVisibility;\n        this.toggleDescriptionVisibility = () => {\n            this.widgetGuidelinesVisible = false;\n            icon.textContent = this.widgetGuidelinesVisible ? '-' : '+';\n            Object.assign(content.style, this.widgetGuidelinesVisible ? styles.contentStyle : { display: 'none' });\n            content.removeChild(button);\n        };\n        button.onclick = () => {\n            var _a, _b, _c;\n            toggleDescriptionVisibility();\n            if (this.test) {\n                const durations = (_a = this.signalManager) === null || _a === void 0 ? void 0 : _a.getDurations();\n                const taskDurationInd = durations\n                    ? durations.tasks.findIndex((t) => this.test && t.taskId === this.test.tasks[0].task_id)\n                    : null;\n                if (durations && taskDurationInd === -1) {\n                    durations.tasks.push({\n                        taskId: this.test.tasks[0].task_id,\n                        started: this.app.timestamp(),\n                    });\n                    (_b = this.signalManager) === null || _b === void 0 ? void 0 : _b.setDurations(durations);\n                }\n                void ((_c = this.signalManager) === null || _c === void 0 ? void 0 : _c.signalTask(this.test.tasks[0].task_id, 'begin'));\n            }\n            this.showTaskSection();\n            content.removeChild(button);\n        };\n        return section;\n    }\n    createTasksSection(tasks) {\n        this.container.style.fontFamily = `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`;\n        Object.assign(this.container.style, styles.containerWidgetStyle);\n        const section = createElement('div', 'task_section_or', styles.descriptionWidgetStyle);\n        const titleContainer = createElement('div', 'description_t_title_or', styles.sectionTitleStyle);\n        const title = createElement('div', 'title', {\n            fontSize: '13px',\n            fontWeight: '500',\n            lineHeight: 'auto',\n        }, 'Tasks');\n        const icon = createElement('div', 'icon', styles.symbolIcon, '-');\n        const content = createElement('div', 'content', styles.contentStyle);\n        const pagination = createElement('div', 'pagination', styles.paginationStyle);\n        // const leftArrow = createElement('span', 'leftArrow', {}, '<')\n        // const rightArrow = createElement('span', 'rightArrow', {}, '>')\n        const taskCard = createElement('div', 'taskCard', styles.taskDescriptionCard);\n        const taskText = createElement('div', 'taskText', styles.taskTextStyle);\n        const taskDescription = createElement('div', 'taskDescription', styles.taskDescriptionStyle);\n        const taskButtons = createElement('div', 'taskButtons', styles.taskButtonsRow);\n        const inputTitle = createElement('div', 'taskText', styles.taskTextStyle);\n        inputTitle.textContent = 'Your answer';\n        const inputArea = createElement('textarea', 'taskDescription', {\n            resize: 'vertical',\n        });\n        const inputContainer = createElement('div', 'inputArea', styles.taskDescriptionCard);\n        inputContainer.append(inputTitle, inputArea);\n        const closePanelButton = createElement('div', 'closePanelButton', styles.taskButtonStyle, 'Collapse Panel');\n        const nextButton = createElement('div', 'nextButton', styles.taskButtonBorderedStyle, 'Done, Next');\n        titleContainer.append(title, icon);\n        taskCard.append(taskText, taskDescription);\n        taskButtons.append(closePanelButton, nextButton);\n        content.append(pagination, taskCard, inputContainer, taskButtons);\n        section.append(titleContainer, content);\n        const updateTaskContent = () => {\n            const task = tasks[this.currentTaskIndex];\n            taskText.textContent = task.title;\n            taskDescription.textContent = task.description;\n            if (task.allow_typing) {\n                inputContainer.style.display = 'flex';\n            }\n            else {\n                inputContainer.style.display = 'none';\n            }\n        };\n        // pagination.appendChild(leftArrow)\n        tasks.forEach((_, index) => {\n            const pageNumber = createElement('span', `or_task_${index}`, {\n                outline: '1px solid #efefef',\n                fontSize: '13px',\n                height: '24px',\n                width: '24px',\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n                borderRadius: '6.25em',\n            }, (index + 1).toString());\n            pageNumber.id = `or_task_${index}`;\n            pagination.append(pageNumber);\n        });\n        // pagination.appendChild(rightArrow)\n        const toggleTasksVisibility = () => {\n            this.widgetTasksVisible = !this.widgetTasksVisible;\n            icon.textContent = this.widgetTasksVisible ? '-' : '+';\n            Object.assign(content.style, this.widgetTasksVisible ? styles.contentStyle : { display: 'none' });\n        };\n        this.hideTaskSection = () => {\n            icon.textContent = '+';\n            Object.assign(content.style, {\n                display: 'none',\n            });\n            this.widgetTasksVisible = false;\n            return false;\n        };\n        this.showTaskSection = () => {\n            icon.textContent = '-';\n            Object.assign(content.style, styles.contentStyle);\n            this.widgetTasksVisible = true;\n            return true;\n        };\n        const highlightActive = () => {\n            const activeTaskEl = document.getElementById(`or_task_${this.currentTaskIndex}`);\n            if (activeTaskEl) {\n                Object.assign(activeTaskEl.style, styles.taskNumberActive);\n            }\n            for (let i = 0; i < this.currentTaskIndex; i++) {\n                const taskEl = document.getElementById(`or_task_${i}`);\n                if (taskEl) {\n                    Object.assign(taskEl.style, styles.taskNumberDone);\n                }\n            }\n        };\n        titleContainer.onclick = toggleTasksVisibility;\n        closePanelButton.onclick = this.collapseWidget;\n        nextButton.onclick = () => {\n            var _a, _b, _c, _d;\n            const textAnswer = tasks[this.currentTaskIndex].allow_typing ? inputArea.value : undefined;\n            inputArea.value = '';\n            void ((_a = this.signalManager) === null || _a === void 0 ? void 0 : _a.signalTask(tasks[this.currentTaskIndex].task_id, 'done', textAnswer));\n            if (this.currentTaskIndex < tasks.length - 1) {\n                this.currentTaskIndex++;\n                updateTaskContent();\n                const durations = (_b = this.signalManager) === null || _b === void 0 ? void 0 : _b.getDurations();\n                if (durations &&\n                    durations.tasks.findIndex((t) => t.taskId === tasks[this.currentTaskIndex].task_id) === -1) {\n                    durations.tasks.push({\n                        taskId: tasks[this.currentTaskIndex].task_id,\n                        started: this.app.timestamp(),\n                    });\n                    (_c = this.signalManager) === null || _c === void 0 ? void 0 : _c.setDurations(durations);\n                }\n                void ((_d = this.signalManager) === null || _d === void 0 ? void 0 : _d.signalTask(tasks[this.currentTaskIndex].task_id, 'begin'));\n                highlightActive();\n            }\n            else {\n                this.showEndSection();\n            }\n            this.app.localStorage.setItem('or_uxt_task_index', this.currentTaskIndex.toString());\n        };\n        setTimeout(() => {\n            const firstTaskEl = document.getElementById('or_task_0');\n            if (firstTaskEl) {\n                Object.assign(firstTaskEl.style, styles.taskNumberActive);\n            }\n            updateTaskContent();\n            highlightActive();\n        }, 1);\n        return section;\n    }\n    showEndSection() {\n        var _a, _b, _c, _d, _e;\n        let isLoading = true;\n        void ((_a = this.signalManager) === null || _a === void 0 ? void 0 : _a.signalTest('done'));\n        const section = createElement('div', 'end_section_or', styles.endSectionStyle);\n        const title = createElement('div', 'end_title_or', {\n            fontSize: '1.25rem',\n            fontWeight: '500',\n        }, 'Thank you! 👍');\n        const description = createElement('div', 'end_description_or', {}, (_c = (_b = this.test) === null || _b === void 0 ? void 0 : _b.conclusion) !== null && _c !== void 0 ? _c : 'Thank you for participating in our usability test. Your feedback has been captured and will be used to enhance our website. \\n' +\n            '\\n' +\n            'We appreciate your time and valuable input.');\n        const button = createElement('div', 'end_button_or', styles.buttonWidgetStyle, 'Submitting Feedback');\n        const spinner = createSpinner();\n        button.appendChild(spinner);\n        if (((_d = this.test) === null || _d === void 0 ? void 0 : _d.reqMic) || ((_e = this.test) === null || _e === void 0 ? void 0 : _e.reqCamera)) {\n            void this.userRecorder\n                .sendToAPI()\n                .then(() => {\n                button.removeChild(spinner);\n                button.textContent = 'End Session';\n                isLoading = false;\n            })\n                .catch((err) => {\n                console.error(err);\n                button.removeChild(spinner);\n                button.textContent = 'End Session';\n                isLoading = false;\n            });\n        }\n        else {\n            button.removeChild(spinner);\n            button.textContent = 'End Session';\n            isLoading = false;\n        }\n        if (this.taskSection) {\n            this.container.removeChild(this.taskSection);\n        }\n        if (this.descriptionSection) {\n            this.container.removeChild(this.descriptionSection);\n        }\n        if (this.stopButton && this.stopButtonContainer) {\n            this.container.removeChild(this.stopButtonContainer);\n        }\n        button.onclick = () => {\n            if (isLoading)\n                return;\n            window.close();\n            document.body.removeChild(this.bg);\n        };\n        section.append(title, description, button);\n        this.endSection = section;\n        this.container.append(section);\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}