{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst messages_gen_js_1 = require(\"../app/messages.gen.js\");\nfunction selection(app) {\n  app.attachEventListener(document, 'selectionchange', () => {\n    const selection = document.getSelection();\n    if (selection !== null && !selection.isCollapsed) {\n      const selectionStart = app.nodes.getID(selection.anchorNode);\n      const selectionEnd = app.nodes.getID(selection.focusNode);\n      const selectedText = selection.toString().replace(/\\s+/g, ' ');\n      if (selectionStart && selectionEnd) {\n        app.send((0, messages_gen_js_1.SelectionChange)(selectionStart, selectionEnd, selectedText));\n      }\n    } else {\n      app.send((0, messages_gen_js_1.SelectionChange)(-1, -1, ''));\n    }\n  });\n}\nexports.default = selection;\n/** TODO: research how to get all in-between nodes inside selection range\n *        including nodes between anchor and focus nodes and their children\n *        without recursively searching the dom tree\n */\n// if (selection.rangeCount) {\n//   const nodes = [];\n//   for (let i = 0; i < selection.rangeCount; i++) {\n//     const range = selection.getRangeAt(i);\n//     let node: Node | null = range.startContainer;\n//     while (node) {\n//       nodes.push(node);\n//       if (node === range.endContainer) break;\n//       node = node.nextSibling;\n//     }\n//   }\n//   // send selected nodes\n// }","map":{"version":3,"names":["Object","defineProperty","exports","value","messages_gen_js_1","require","selection","app","attachEventListener","document","getSelection","isCollapsed","selectionStart","nodes","getID","anchorNode","selectionEnd","focusNode","selectedText","toString","replace","send","SelectionChange","default"],"sources":["/Users/paramvirrotwal/Observability/website-admin-react-web-app-project/node_modules/@openreplay/tracker/cjs/modules/selection.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_gen_js_1 = require(\"../app/messages.gen.js\");\nfunction selection(app) {\n    app.attachEventListener(document, 'selectionchange', () => {\n        const selection = document.getSelection();\n        if (selection !== null && !selection.isCollapsed) {\n            const selectionStart = app.nodes.getID(selection.anchorNode);\n            const selectionEnd = app.nodes.getID(selection.focusNode);\n            const selectedText = selection.toString().replace(/\\s+/g, ' ');\n            if (selectionStart && selectionEnd) {\n                app.send((0, messages_gen_js_1.SelectionChange)(selectionStart, selectionEnd, selectedText));\n            }\n        }\n        else {\n            app.send((0, messages_gen_js_1.SelectionChange)(-1, -1, ''));\n        }\n    });\n}\nexports.default = selection;\n/** TODO: research how to get all in-between nodes inside selection range\n *        including nodes between anchor and focus nodes and their children\n *        without recursively searching the dom tree\n */\n// if (selection.rangeCount) {\n//   const nodes = [];\n//   for (let i = 0; i < selection.rangeCount; i++) {\n//     const range = selection.getRangeAt(i);\n//     let node: Node | null = range.startContainer;\n//     while (node) {\n//       nodes.push(node);\n//       if (node === range.endContainer) break;\n//       node = node.nextSibling;\n//     }\n//   }\n//   // send selected nodes\n// }\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7D,MAAMC,iBAAiB,GAAGC,OAAO,CAAC,wBAAwB,CAAC;AAC3D,SAASC,SAASA,CAACC,GAAG,EAAE;EACpBA,GAAG,CAACC,mBAAmB,CAACC,QAAQ,EAAE,iBAAiB,EAAE,MAAM;IACvD,MAAMH,SAAS,GAAGG,QAAQ,CAACC,YAAY,CAAC,CAAC;IACzC,IAAIJ,SAAS,KAAK,IAAI,IAAI,CAACA,SAAS,CAACK,WAAW,EAAE;MAC9C,MAAMC,cAAc,GAAGL,GAAG,CAACM,KAAK,CAACC,KAAK,CAACR,SAAS,CAACS,UAAU,CAAC;MAC5D,MAAMC,YAAY,GAAGT,GAAG,CAACM,KAAK,CAACC,KAAK,CAACR,SAAS,CAACW,SAAS,CAAC;MACzD,MAAMC,YAAY,GAAGZ,SAAS,CAACa,QAAQ,CAAC,CAAC,CAACC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC;MAC9D,IAAIR,cAAc,IAAII,YAAY,EAAE;QAChCT,GAAG,CAACc,IAAI,CAAC,CAAC,CAAC,EAAEjB,iBAAiB,CAACkB,eAAe,EAAEV,cAAc,EAAEI,YAAY,EAAEE,YAAY,CAAC,CAAC;MAChG;IACJ,CAAC,MACI;MACDX,GAAG,CAACc,IAAI,CAAC,CAAC,CAAC,EAAEjB,iBAAiB,CAACkB,eAAe,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IAChE;EACJ,CAAC,CAAC;AACN;AACApB,OAAO,CAACqB,OAAO,GAAGjB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"script"}