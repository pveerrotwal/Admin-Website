{"ast":null,"code":"export default class ConditionsManager {\n  constructor(app, startParams) {\n    this.app = app;\n    this.startParams = startParams;\n    this.conditions = [];\n    this.hasStarted = false;\n    this.createConditionFromFilter = filter => {\n      if (filter.value.length) {\n        const resultCondition = mapCondition(filter);\n        if (resultCondition.type) {\n          return resultCondition;\n        }\n      }\n      return undefined;\n    };\n    this.durationInt = null;\n  }\n  setConditions(conditions) {\n    this.conditions = conditions;\n  }\n  async fetchConditions(projectId, token) {\n    try {\n      const r = await fetch(`${this.app.options.ingestPoint}/v1/web/conditions/${projectId}`, {\n        method: 'GET',\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const {\n        conditions\n      } = await r.json();\n      const mappedConditions = [];\n      conditions.forEach(c => {\n        const filters = c.filters;\n        filters.forEach(filter => {\n          let cond;\n          if (filter.type === 'fetch') {\n            cond = {\n              type: 'network_request',\n              subConditions: [],\n              name: c.name\n            };\n            filter.filters.forEach(f => {\n              const subCond = this.createConditionFromFilter(f);\n              if (subCond) {\n                ;\n                cond.subConditions.push(subCond);\n              }\n            });\n          } else {\n            cond = this.createConditionFromFilter(filter);\n          }\n          if (cond) {\n            if (cond.type === 'session_duration') {\n              this.processDuration(cond.value[0], c.name);\n            }\n            mappedConditions.push(Object.assign(Object.assign({}, cond), {\n              name: c.name\n            }));\n          }\n        });\n      });\n      this.conditions = mappedConditions;\n    } catch (e) {\n      this.app.debug.error('Critical: cannot fetch start conditions');\n    }\n  }\n  trigger(conditionName) {\n    if (this.hasStarted) return;\n    try {\n      this.hasStarted = true;\n      void this.app.start(this.startParams, undefined, conditionName);\n    } catch (e) {\n      this.app.debug.error(e);\n    }\n  }\n  processMessage(message) {\n    if (this.hasStarted) return;\n    switch (message[0]) {\n      case 78 /* Type.JSException */:\n        this.jsExceptionEvent(message);\n        break;\n      case 27 /* Type.CustomEvent */:\n        this.customEvent(message);\n        break;\n      case 69 /* Type.MouseClick */:\n        this.clickEvent(message);\n        break;\n      case 4 /* Type.SetPageLocation */:\n        this.pageLocationEvent(message);\n        break;\n      case 83 /* Type.NetworkRequest */:\n        this.networkRequest(message);\n        break;\n      default:\n        break;\n    }\n  }\n  processFlags(flag) {\n    const flagConds = this.conditions.filter(c => c.type === 'feature_flag');\n    if (flagConds.length) {\n      flagConds.forEach(flagCond => {\n        const operator = operators[flagCond.operator];\n        if (operator && flag.find(f => operator(f.key, flagCond.value))) {\n          this.trigger(flagCond.name);\n        }\n      });\n    }\n  }\n  processDuration(durationMs, condName) {\n    this.durationInt = setInterval(() => {\n      const sessionLength = performance.now();\n      if (sessionLength > durationMs) {\n        this.trigger(condName);\n      }\n    }, 1000);\n    this.app.attachStopCallback(() => {\n      if (this.durationInt) {\n        clearInterval(this.durationInt);\n      }\n    });\n  }\n  networkRequest(message) {\n    // method - 2, url - 3, status - 6, duration - 8\n    const reqConds = this.conditions.filter(c => c.type === 'network_request');\n    if (!reqConds.length) return;\n    reqConds.forEach(reqCond => {\n      const validSubConditions = reqCond.subConditions.filter(c => c.operator !== 'isAny');\n      if (validSubConditions.length) {\n        const allPass = validSubConditions.every(subCond => {\n          let value;\n          switch (subCond.key) {\n            case 'url':\n              value = message[3];\n              break;\n            case 'status':\n              value = message[6];\n              break;\n            case 'method':\n              value = message[2];\n              break;\n            case 'duration':\n              value = message[8];\n              break;\n            default:\n              break;\n          }\n          const operator = operators[subCond.operator];\n          // @ts-ignore\n          if (operator && operator(value, subCond.value)) {\n            return true;\n          }\n        });\n        if (allPass) {\n          this.trigger(reqCond.name);\n        }\n      } else if (validSubConditions.length === 0 && reqCond.subConditions.length) {\n        this.trigger(reqCond.name);\n      }\n    });\n  }\n  customEvent(message) {\n    // name - 1, payload - 2\n    const evConds = this.conditions.filter(c => c.type === 'custom_event');\n    if (evConds.length) {\n      evConds.forEach(evCond => {\n        const operator = operators[evCond.operator];\n        if (operator && (operator(message[1], evCond.value) || operator(message[2], evCond.value))) {\n          this.trigger(evCond.name);\n        }\n      });\n    }\n  }\n  clickEvent(message) {\n    // label - 3, selector - 4\n    const clickCond = this.conditions.filter(c => c.type === 'click');\n    if (clickCond.length) {\n      clickCond.forEach(click => {\n        const operator = operators[click.operator];\n        if (operator && (operator(message[3], click.value) || operator(message[4], click.value))) {\n          this.trigger(click.name);\n        }\n      });\n    }\n  }\n  pageLocationEvent(message) {\n    // url - 1\n    const urlConds = this.conditions.filter(c => c.type === 'visited_url');\n    if (urlConds) {\n      urlConds.forEach(urlCond => {\n        const operator = operators[urlCond.operator];\n        if (operator && operator(message[1], urlCond.value)) {\n          this.trigger(urlCond.name);\n        }\n      });\n    }\n  }\n  jsExceptionEvent(message) {\n    // name - 1, message - 2, payload - 3\n    const testedValues = [message[1], message[2], message[3]];\n    const exceptionConds = this.conditions.filter(c => c.type === 'exception');\n    if (exceptionConds) {\n      exceptionConds.forEach(exceptionCond => {\n        const operator = operators[exceptionCond.operator];\n        if (operator && testedValues.some(val => operator(val, exceptionCond.value))) {\n          this.trigger(exceptionCond.name);\n        }\n      });\n    }\n  }\n}\nconst operators = {\n  is: (val, target) => target.some(t => val.includes(t)),\n  isAny: () => true,\n  isNot: (val, target) => !target.some(t => val.includes(t)),\n  contains: (val, target) => target.some(t => val.includes(t)),\n  notContains: (val, target) => !target.some(t => val.includes(t)),\n  startsWith: (val, target) => target.some(t => val.startsWith(t)),\n  endsWith: (val, target) => target.some(t => val.endsWith(t)),\n  greaterThan: (val, target) => val > target,\n  greaterOrEqual: (val, target) => val >= target,\n  lessOrEqual: (val, target) => val <= target,\n  lessThan: (val, target) => val < target\n};\nconst mapCondition = condition => {\n  const opMap = {\n    on: 'is',\n    notOn: 'isNot',\n    '\\u003e': 'greaterThan',\n    '\\u003c': 'lessThan',\n    '\\u003d': 'is',\n    '\\u003c=': 'lessOrEqual',\n    '\\u003e=': 'greaterOrEqual'\n  };\n  const mapOperator = operator => {\n    const keys = Object.keys(opMap);\n    // @ts-ignore\n    if (keys.includes(operator)) return opMap[operator];\n  };\n  let con = {\n    type: '',\n    operator: '',\n    value: condition.value,\n    key: ''\n  };\n  switch (condition.type) {\n    case 'click':\n      con = {\n        type: 'click',\n        operator: mapOperator(condition.operator),\n        value: condition.value,\n        key: ''\n      };\n      break;\n    case 'location':\n      con = {\n        type: 'visited_url',\n        // @ts-ignore\n        operator: condition.operator,\n        value: condition.value,\n        key: ''\n      };\n      break;\n    case 'custom':\n      con = {\n        type: 'custom_event',\n        // @ts-ignore\n        operator: condition.operator,\n        value: condition.value,\n        key: ''\n      };\n      break;\n    case 'metadata':\n      con = {\n        // @ts-ignore\n        type: condition.source === 'featureFlag' ? 'feature_flag' : condition.type,\n        // @ts-ignore\n        operator: condition.operator,\n        value: condition.value,\n        key: ''\n      };\n      break;\n    case 'error':\n      con = {\n        type: 'exception',\n        // @ts-ignore\n        operator: condition.operator,\n        value: condition.value,\n        key: ''\n      };\n      break;\n    case 'duration':\n      con = {\n        type: 'session_duration',\n        // @ts-ignore\n        value: condition.value[0],\n        key: ''\n      };\n      break;\n    case 'fetchUrl':\n      con = {\n        type: 'network_request',\n        key: 'url',\n        operator: condition.operator,\n        value: condition.value\n      };\n      break;\n    case 'fetchStatusCode':\n      con = {\n        type: 'network_request',\n        key: 'status',\n        operator: mapOperator(condition.operator),\n        value: condition.value\n      };\n      break;\n    case 'fetchMethod':\n      con = {\n        type: 'network_request',\n        key: 'method',\n        operator: mapOperator(condition.operator),\n        value: condition.value\n      };\n      break;\n    case 'fetchDuration':\n      con = {\n        type: 'network_request',\n        key: 'duration',\n        operator: mapOperator(condition.operator),\n        value: condition.value\n      };\n      break;\n  }\n  // @ts-ignore\n  return con;\n};","map":{"version":3,"names":["ConditionsManager","constructor","app","startParams","conditions","hasStarted","createConditionFromFilter","filter","value","length","resultCondition","mapCondition","type","undefined","durationInt","setConditions","fetchConditions","projectId","token","r","fetch","options","ingestPoint","method","headers","Authorization","json","mappedConditions","forEach","c","filters","cond","subConditions","name","f","subCond","push","processDuration","Object","assign","e","debug","error","trigger","conditionName","start","processMessage","message","jsExceptionEvent","customEvent","clickEvent","pageLocationEvent","networkRequest","processFlags","flag","flagConds","flagCond","operator","operators","find","key","durationMs","condName","setInterval","sessionLength","performance","now","attachStopCallback","clearInterval","reqConds","reqCond","validSubConditions","allPass","every","evConds","evCond","clickCond","click","urlConds","urlCond","testedValues","exceptionConds","exceptionCond","some","val","is","target","t","includes","isAny","isNot","contains","notContains","startsWith","endsWith","greaterThan","greaterOrEqual","lessOrEqual","lessThan","condition","opMap","on","notOn","mapOperator","keys","con","source"],"sources":["/Users/paramvirrotwal/Observability/website-admin-react-web-app-project/node_modules/@openreplay/tracker/lib/modules/conditionsManager.js"],"sourcesContent":["export default class ConditionsManager {\n    constructor(app, startParams) {\n        this.app = app;\n        this.startParams = startParams;\n        this.conditions = [];\n        this.hasStarted = false;\n        this.createConditionFromFilter = (filter) => {\n            if (filter.value.length) {\n                const resultCondition = mapCondition(filter);\n                if (resultCondition.type) {\n                    return resultCondition;\n                }\n            }\n            return undefined;\n        };\n        this.durationInt = null;\n    }\n    setConditions(conditions) {\n        this.conditions = conditions;\n    }\n    async fetchConditions(projectId, token) {\n        try {\n            const r = await fetch(`${this.app.options.ingestPoint}/v1/web/conditions/${projectId}`, {\n                method: 'GET',\n                headers: {\n                    Authorization: `Bearer ${token}`,\n                },\n            });\n            const { conditions } = (await r.json());\n            const mappedConditions = [];\n            conditions.forEach((c) => {\n                const filters = c.filters;\n                filters.forEach((filter) => {\n                    let cond;\n                    if (filter.type === 'fetch') {\n                        cond = {\n                            type: 'network_request',\n                            subConditions: [],\n                            name: c.name,\n                        };\n                        filter.filters.forEach((f) => {\n                            const subCond = this.createConditionFromFilter(f);\n                            if (subCond) {\n                                ;\n                                cond.subConditions.push(subCond);\n                            }\n                        });\n                    }\n                    else {\n                        cond = this.createConditionFromFilter(filter);\n                    }\n                    if (cond) {\n                        if (cond.type === 'session_duration') {\n                            this.processDuration(cond.value[0], c.name);\n                        }\n                        mappedConditions.push(Object.assign(Object.assign({}, cond), { name: c.name }));\n                    }\n                });\n            });\n            this.conditions = mappedConditions;\n        }\n        catch (e) {\n            this.app.debug.error('Critical: cannot fetch start conditions');\n        }\n    }\n    trigger(conditionName) {\n        if (this.hasStarted)\n            return;\n        try {\n            this.hasStarted = true;\n            void this.app.start(this.startParams, undefined, conditionName);\n        }\n        catch (e) {\n            this.app.debug.error(e);\n        }\n    }\n    processMessage(message) {\n        if (this.hasStarted)\n            return;\n        switch (message[0]) {\n            case 78 /* Type.JSException */:\n                this.jsExceptionEvent(message);\n                break;\n            case 27 /* Type.CustomEvent */:\n                this.customEvent(message);\n                break;\n            case 69 /* Type.MouseClick */:\n                this.clickEvent(message);\n                break;\n            case 4 /* Type.SetPageLocation */:\n                this.pageLocationEvent(message);\n                break;\n            case 83 /* Type.NetworkRequest */:\n                this.networkRequest(message);\n                break;\n            default:\n                break;\n        }\n    }\n    processFlags(flag) {\n        const flagConds = this.conditions.filter((c) => c.type === 'feature_flag');\n        if (flagConds.length) {\n            flagConds.forEach((flagCond) => {\n                const operator = operators[flagCond.operator];\n                if (operator && flag.find((f) => operator(f.key, flagCond.value))) {\n                    this.trigger(flagCond.name);\n                }\n            });\n        }\n    }\n    processDuration(durationMs, condName) {\n        this.durationInt = setInterval(() => {\n            const sessionLength = performance.now();\n            if (sessionLength > durationMs) {\n                this.trigger(condName);\n            }\n        }, 1000);\n        this.app.attachStopCallback(() => {\n            if (this.durationInt) {\n                clearInterval(this.durationInt);\n            }\n        });\n    }\n    networkRequest(message) {\n        // method - 2, url - 3, status - 6, duration - 8\n        const reqConds = this.conditions.filter((c) => c.type === 'network_request');\n        if (!reqConds.length)\n            return;\n        reqConds.forEach((reqCond) => {\n            const validSubConditions = reqCond.subConditions.filter((c) => c.operator !== 'isAny');\n            if (validSubConditions.length) {\n                const allPass = validSubConditions.every((subCond) => {\n                    let value;\n                    switch (subCond.key) {\n                        case 'url':\n                            value = message[3];\n                            break;\n                        case 'status':\n                            value = message[6];\n                            break;\n                        case 'method':\n                            value = message[2];\n                            break;\n                        case 'duration':\n                            value = message[8];\n                            break;\n                        default:\n                            break;\n                    }\n                    const operator = operators[subCond.operator];\n                    // @ts-ignore\n                    if (operator && operator(value, subCond.value)) {\n                        return true;\n                    }\n                });\n                if (allPass) {\n                    this.trigger(reqCond.name);\n                }\n            }\n            else if (validSubConditions.length === 0 && reqCond.subConditions.length) {\n                this.trigger(reqCond.name);\n            }\n        });\n    }\n    customEvent(message) {\n        // name - 1, payload - 2\n        const evConds = this.conditions.filter((c) => c.type === 'custom_event');\n        if (evConds.length) {\n            evConds.forEach((evCond) => {\n                const operator = operators[evCond.operator];\n                if (operator &&\n                    (operator(message[1], evCond.value) || operator(message[2], evCond.value))) {\n                    this.trigger(evCond.name);\n                }\n            });\n        }\n    }\n    clickEvent(message) {\n        // label - 3, selector - 4\n        const clickCond = this.conditions.filter((c) => c.type === 'click');\n        if (clickCond.length) {\n            clickCond.forEach((click) => {\n                const operator = operators[click.operator];\n                if (operator && (operator(message[3], click.value) || operator(message[4], click.value))) {\n                    this.trigger(click.name);\n                }\n            });\n        }\n    }\n    pageLocationEvent(message) {\n        // url - 1\n        const urlConds = this.conditions.filter((c) => c.type === 'visited_url');\n        if (urlConds) {\n            urlConds.forEach((urlCond) => {\n                const operator = operators[urlCond.operator];\n                if (operator && operator(message[1], urlCond.value)) {\n                    this.trigger(urlCond.name);\n                }\n            });\n        }\n    }\n    jsExceptionEvent(message) {\n        // name - 1, message - 2, payload - 3\n        const testedValues = [message[1], message[2], message[3]];\n        const exceptionConds = this.conditions.filter((c) => c.type === 'exception');\n        if (exceptionConds) {\n            exceptionConds.forEach((exceptionCond) => {\n                const operator = operators[exceptionCond.operator];\n                if (operator && testedValues.some((val) => operator(val, exceptionCond.value))) {\n                    this.trigger(exceptionCond.name);\n                }\n            });\n        }\n    }\n}\nconst operators = {\n    is: (val, target) => target.some((t) => val.includes(t)),\n    isAny: () => true,\n    isNot: (val, target) => !target.some((t) => val.includes(t)),\n    contains: (val, target) => target.some((t) => val.includes(t)),\n    notContains: (val, target) => !target.some((t) => val.includes(t)),\n    startsWith: (val, target) => target.some((t) => val.startsWith(t)),\n    endsWith: (val, target) => target.some((t) => val.endsWith(t)),\n    greaterThan: (val, target) => val > target,\n    greaterOrEqual: (val, target) => val >= target,\n    lessOrEqual: (val, target) => val <= target,\n    lessThan: (val, target) => val < target,\n};\nconst mapCondition = (condition) => {\n    const opMap = {\n        on: 'is',\n        notOn: 'isNot',\n        '\\u003e': 'greaterThan',\n        '\\u003c': 'lessThan',\n        '\\u003d': 'is',\n        '\\u003c=': 'lessOrEqual',\n        '\\u003e=': 'greaterOrEqual',\n    };\n    const mapOperator = (operator) => {\n        const keys = Object.keys(opMap);\n        // @ts-ignore\n        if (keys.includes(operator))\n            return opMap[operator];\n    };\n    let con = {\n        type: '',\n        operator: '',\n        value: condition.value,\n        key: '',\n    };\n    switch (condition.type) {\n        case 'click':\n            con = {\n                type: 'click',\n                operator: mapOperator(condition.operator),\n                value: condition.value,\n                key: '',\n            };\n            break;\n        case 'location':\n            con = {\n                type: 'visited_url',\n                // @ts-ignore\n                operator: condition.operator,\n                value: condition.value,\n                key: '',\n            };\n            break;\n        case 'custom':\n            con = {\n                type: 'custom_event',\n                // @ts-ignore\n                operator: condition.operator,\n                value: condition.value,\n                key: '',\n            };\n            break;\n        case 'metadata':\n            con = {\n                // @ts-ignore\n                type: condition.source === 'featureFlag' ? 'feature_flag' : condition.type,\n                // @ts-ignore\n                operator: condition.operator,\n                value: condition.value,\n                key: '',\n            };\n            break;\n        case 'error':\n            con = {\n                type: 'exception',\n                // @ts-ignore\n                operator: condition.operator,\n                value: condition.value,\n                key: '',\n            };\n            break;\n        case 'duration':\n            con = {\n                type: 'session_duration',\n                // @ts-ignore\n                value: condition.value[0],\n                key: '',\n            };\n            break;\n        case 'fetchUrl':\n            con = {\n                type: 'network_request',\n                key: 'url',\n                operator: condition.operator,\n                value: condition.value,\n            };\n            break;\n        case 'fetchStatusCode':\n            con = {\n                type: 'network_request',\n                key: 'status',\n                operator: mapOperator(condition.operator),\n                value: condition.value,\n            };\n            break;\n        case 'fetchMethod':\n            con = {\n                type: 'network_request',\n                key: 'method',\n                operator: mapOperator(condition.operator),\n                value: condition.value,\n            };\n            break;\n        case 'fetchDuration':\n            con = {\n                type: 'network_request',\n                key: 'duration',\n                operator: mapOperator(condition.operator),\n                value: condition.value,\n            };\n            break;\n    }\n    // @ts-ignore\n    return con;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}