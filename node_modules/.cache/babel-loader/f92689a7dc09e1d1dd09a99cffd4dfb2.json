{"ast":null,"code":"import { isNode, hasTag } from '../app/guards.js';\nimport { SetNodeFocus } from '../app/messages.gen.js';\nexport default function (app) {\n  function sendSetNodeFocus(n) {\n    const id = app.nodes.getID(n);\n    if (id !== undefined) {\n      app.send(SetNodeFocus(id));\n    }\n  }\n  let blurred = false;\n  app.nodes.attachNodeCallback(node => {\n    if (!hasTag(node, 'body')) {\n      return;\n    }\n    app.nodes.attachNodeListener(node, 'focus', e => {\n      if (!isNode(e.target)) {\n        return;\n      }\n      sendSetNodeFocus(e.target);\n      blurred = false;\n    });\n    app.nodes.attachNodeListener(node, 'blur', e => {\n      if (e.relatedTarget === null) {\n        blurred = true;\n        setTimeout(() => {\n          if (blurred) {\n            app.send(SetNodeFocus(-1));\n          }\n        }, 0);\n      }\n    });\n  });\n  app.attachStartCallback(() => {\n    let elem = document.activeElement;\n    while (elem && hasTag(elem, 'iframe') && elem.contentDocument) {\n      elem = elem.contentDocument.activeElement;\n    }\n    if (elem && elem !== elem.ownerDocument.body) {\n      sendSetNodeFocus(elem);\n    }\n  }, true);\n}","map":{"version":3,"names":["isNode","hasTag","SetNodeFocus","app","sendSetNodeFocus","n","id","nodes","getID","undefined","send","blurred","attachNodeCallback","node","attachNodeListener","e","target","relatedTarget","setTimeout","attachStartCallback","elem","document","activeElement","contentDocument","ownerDocument","body"],"sources":["/Users/paramvirrotwal/Observability/website-admin-react-web-app-project/node_modules/@openreplay/tracker/lib/modules/focus.js"],"sourcesContent":["import { isNode, hasTag } from '../app/guards.js';\nimport { SetNodeFocus } from '../app/messages.gen.js';\nexport default function (app) {\n    function sendSetNodeFocus(n) {\n        const id = app.nodes.getID(n);\n        if (id !== undefined) {\n            app.send(SetNodeFocus(id));\n        }\n    }\n    let blurred = false;\n    app.nodes.attachNodeCallback((node) => {\n        if (!hasTag(node, 'body')) {\n            return;\n        }\n        app.nodes.attachNodeListener(node, 'focus', (e) => {\n            if (!isNode(e.target)) {\n                return;\n            }\n            sendSetNodeFocus(e.target);\n            blurred = false;\n        });\n        app.nodes.attachNodeListener(node, 'blur', (e) => {\n            if (e.relatedTarget === null) {\n                blurred = true;\n                setTimeout(() => {\n                    if (blurred) {\n                        app.send(SetNodeFocus(-1));\n                    }\n                }, 0);\n            }\n        });\n    });\n    app.attachStartCallback(() => {\n        let elem = document.activeElement;\n        while (elem && hasTag(elem, 'iframe') && elem.contentDocument) {\n            elem = elem.contentDocument.activeElement;\n        }\n        if (elem && elem !== elem.ownerDocument.body) {\n            sendSetNodeFocus(elem);\n        }\n    }, true);\n}\n"],"mappings":"AAAA,SAASA,MAAM,EAAEC,MAAM,QAAQ,kBAAkB;AACjD,SAASC,YAAY,QAAQ,wBAAwB;AACrD,eAAe,UAAUC,GAAG,EAAE;EAC1B,SAASC,gBAAgBA,CAACC,CAAC,EAAE;IACzB,MAAMC,EAAE,GAAGH,GAAG,CAACI,KAAK,CAACC,KAAK,CAACH,CAAC,CAAC;IAC7B,IAAIC,EAAE,KAAKG,SAAS,EAAE;MAClBN,GAAG,CAACO,IAAI,CAACR,YAAY,CAACI,EAAE,CAAC,CAAC;IAC9B;EACJ;EACA,IAAIK,OAAO,GAAG,KAAK;EACnBR,GAAG,CAACI,KAAK,CAACK,kBAAkB,CAAEC,IAAI,IAAK;IACnC,IAAI,CAACZ,MAAM,CAACY,IAAI,EAAE,MAAM,CAAC,EAAE;MACvB;IACJ;IACAV,GAAG,CAACI,KAAK,CAACO,kBAAkB,CAACD,IAAI,EAAE,OAAO,EAAGE,CAAC,IAAK;MAC/C,IAAI,CAACf,MAAM,CAACe,CAAC,CAACC,MAAM,CAAC,EAAE;QACnB;MACJ;MACAZ,gBAAgB,CAACW,CAAC,CAACC,MAAM,CAAC;MAC1BL,OAAO,GAAG,KAAK;IACnB,CAAC,CAAC;IACFR,GAAG,CAACI,KAAK,CAACO,kBAAkB,CAACD,IAAI,EAAE,MAAM,EAAGE,CAAC,IAAK;MAC9C,IAAIA,CAAC,CAACE,aAAa,KAAK,IAAI,EAAE;QAC1BN,OAAO,GAAG,IAAI;QACdO,UAAU,CAAC,MAAM;UACb,IAAIP,OAAO,EAAE;YACTR,GAAG,CAACO,IAAI,CAACR,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;UAC9B;QACJ,CAAC,EAAE,CAAC,CAAC;MACT;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;EACFC,GAAG,CAACgB,mBAAmB,CAAC,MAAM;IAC1B,IAAIC,IAAI,GAAGC,QAAQ,CAACC,aAAa;IACjC,OAAOF,IAAI,IAAInB,MAAM,CAACmB,IAAI,EAAE,QAAQ,CAAC,IAAIA,IAAI,CAACG,eAAe,EAAE;MAC3DH,IAAI,GAAGA,IAAI,CAACG,eAAe,CAACD,aAAa;IAC7C;IACA,IAAIF,IAAI,IAAIA,IAAI,KAAKA,IAAI,CAACI,aAAa,CAACC,IAAI,EAAE;MAC1CrB,gBAAgB,CAACgB,IAAI,CAAC;IAC1B;EACJ,CAAC,EAAE,IAAI,CAAC;AACZ"},"metadata":{},"sourceType":"module"}