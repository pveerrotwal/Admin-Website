{"ast":null,"code":"import { IN_BROWSER } from '../utils.js';\nimport { PerformanceTrack } from '../app/messages.gen.js';\nconst perf = IN_BROWSER && 'performance' in window && 'memory' in performance // works in Chrome only\n? performance : {\n  memory: {}\n};\nexport const deviceMemory = IN_BROWSER ? (navigator.deviceMemory || 0) * 1024 : 0;\nexport const jsHeapSizeLimit = perf.memory.jsHeapSizeLimit || 0;\nexport default function (app, opts) {\n  const options = Object.assign({\n    capturePerformance: true\n  }, opts);\n  if (!options.capturePerformance) {\n    return;\n  }\n  let frames;\n  let ticks;\n  const nextFrame = () => {\n    if (frames === undefined || frames === -1) {\n      return;\n    }\n    frames++;\n    requestAnimationFrame(nextFrame);\n  };\n  app.ticker.attach(() => {\n    if (ticks === undefined || ticks === -1) {\n      return;\n    }\n    ticks++;\n  }, 0, false);\n  const sendPerformanceTrack = () => {\n    if (frames === undefined || ticks === undefined) {\n      return;\n    }\n    app.send(PerformanceTrack(frames, ticks, perf.memory.totalJSHeapSize || 0, perf.memory.usedJSHeapSize || 0));\n    ticks = frames = document.hidden ? -1 : 0;\n  };\n  app.attachStartCallback(() => {\n    ticks = frames = -1;\n    sendPerformanceTrack();\n    nextFrame();\n  });\n  app.attachStopCallback(() => {\n    ticks = frames = undefined;\n  });\n  app.ticker.attach(sendPerformanceTrack, 40, false);\n  if (document.hidden !== undefined) {\n    app.attachEventListener(document, 'visibilitychange', sendPerformanceTrack, false, false);\n  }\n}","map":{"version":3,"names":["IN_BROWSER","PerformanceTrack","perf","window","performance","memory","deviceMemory","navigator","jsHeapSizeLimit","app","opts","options","Object","assign","capturePerformance","frames","ticks","nextFrame","undefined","requestAnimationFrame","ticker","attach","sendPerformanceTrack","send","totalJSHeapSize","usedJSHeapSize","document","hidden","attachStartCallback","attachStopCallback","attachEventListener"],"sources":["/Users/paramvirrotwal/Observability/website-admin-react-web-app-project/node_modules/@openreplay/tracker/lib/modules/performance.js"],"sourcesContent":["import { IN_BROWSER } from '../utils.js';\nimport { PerformanceTrack } from '../app/messages.gen.js';\nconst perf = IN_BROWSER && 'performance' in window && 'memory' in performance // works in Chrome only\n    ? performance\n    : { memory: {} };\nexport const deviceMemory = IN_BROWSER ? (navigator.deviceMemory || 0) * 1024 : 0;\nexport const jsHeapSizeLimit = perf.memory.jsHeapSizeLimit || 0;\nexport default function (app, opts) {\n    const options = Object.assign({\n        capturePerformance: true,\n    }, opts);\n    if (!options.capturePerformance) {\n        return;\n    }\n    let frames;\n    let ticks;\n    const nextFrame = () => {\n        if (frames === undefined || frames === -1) {\n            return;\n        }\n        frames++;\n        requestAnimationFrame(nextFrame);\n    };\n    app.ticker.attach(() => {\n        if (ticks === undefined || ticks === -1) {\n            return;\n        }\n        ticks++;\n    }, 0, false);\n    const sendPerformanceTrack = () => {\n        if (frames === undefined || ticks === undefined) {\n            return;\n        }\n        app.send(PerformanceTrack(frames, ticks, perf.memory.totalJSHeapSize || 0, perf.memory.usedJSHeapSize || 0));\n        ticks = frames = document.hidden ? -1 : 0;\n    };\n    app.attachStartCallback(() => {\n        ticks = frames = -1;\n        sendPerformanceTrack();\n        nextFrame();\n    });\n    app.attachStopCallback(() => {\n        ticks = frames = undefined;\n    });\n    app.ticker.attach(sendPerformanceTrack, 40, false);\n    if (document.hidden !== undefined) {\n        app.attachEventListener(document, 'visibilitychange', sendPerformanceTrack, false, false);\n    }\n}\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,aAAa;AACxC,SAASC,gBAAgB,QAAQ,wBAAwB;AACzD,MAAMC,IAAI,GAAGF,UAAU,IAAI,aAAa,IAAIG,MAAM,IAAI,QAAQ,IAAIC,WAAW,CAAC;AAAA,EACxEA,WAAW,GACX;EAAEC,MAAM,EAAE,CAAC;AAAE,CAAC;AACpB,OAAO,MAAMC,YAAY,GAAGN,UAAU,GAAG,CAACO,SAAS,CAACD,YAAY,IAAI,CAAC,IAAI,IAAI,GAAG,CAAC;AACjF,OAAO,MAAME,eAAe,GAAGN,IAAI,CAACG,MAAM,CAACG,eAAe,IAAI,CAAC;AAC/D,eAAe,UAAUC,GAAG,EAAEC,IAAI,EAAE;EAChC,MAAMC,OAAO,GAAGC,MAAM,CAACC,MAAM,CAAC;IAC1BC,kBAAkB,EAAE;EACxB,CAAC,EAAEJ,IAAI,CAAC;EACR,IAAI,CAACC,OAAO,CAACG,kBAAkB,EAAE;IAC7B;EACJ;EACA,IAAIC,MAAM;EACV,IAAIC,KAAK;EACT,MAAMC,SAAS,GAAGA,CAAA,KAAM;IACpB,IAAIF,MAAM,KAAKG,SAAS,IAAIH,MAAM,KAAK,CAAC,CAAC,EAAE;MACvC;IACJ;IACAA,MAAM,EAAE;IACRI,qBAAqB,CAACF,SAAS,CAAC;EACpC,CAAC;EACDR,GAAG,CAACW,MAAM,CAACC,MAAM,CAAC,MAAM;IACpB,IAAIL,KAAK,KAAKE,SAAS,IAAIF,KAAK,KAAK,CAAC,CAAC,EAAE;MACrC;IACJ;IACAA,KAAK,EAAE;EACX,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC;EACZ,MAAMM,oBAAoB,GAAGA,CAAA,KAAM;IAC/B,IAAIP,MAAM,KAAKG,SAAS,IAAIF,KAAK,KAAKE,SAAS,EAAE;MAC7C;IACJ;IACAT,GAAG,CAACc,IAAI,CAACtB,gBAAgB,CAACc,MAAM,EAAEC,KAAK,EAAEd,IAAI,CAACG,MAAM,CAACmB,eAAe,IAAI,CAAC,EAAEtB,IAAI,CAACG,MAAM,CAACoB,cAAc,IAAI,CAAC,CAAC,CAAC;IAC5GT,KAAK,GAAGD,MAAM,GAAGW,QAAQ,CAACC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC;EAC7C,CAAC;EACDlB,GAAG,CAACmB,mBAAmB,CAAC,MAAM;IAC1BZ,KAAK,GAAGD,MAAM,GAAG,CAAC,CAAC;IACnBO,oBAAoB,CAAC,CAAC;IACtBL,SAAS,CAAC,CAAC;EACf,CAAC,CAAC;EACFR,GAAG,CAACoB,kBAAkB,CAAC,MAAM;IACzBb,KAAK,GAAGD,MAAM,GAAGG,SAAS;EAC9B,CAAC,CAAC;EACFT,GAAG,CAACW,MAAM,CAACC,MAAM,CAACC,oBAAoB,EAAE,EAAE,EAAE,KAAK,CAAC;EAClD,IAAII,QAAQ,CAACC,MAAM,KAAKT,SAAS,EAAE;IAC/BT,GAAG,CAACqB,mBAAmB,CAACJ,QAAQ,EAAE,kBAAkB,EAAEJ,oBAAoB,EAAE,KAAK,EAAE,KAAK,CAAC;EAC7F;AACJ"},"metadata":{},"sourceType":"module"}